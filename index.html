<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  

  
  
  
  
  

  <title>顾佳伟</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
 <!-- <script src='//push.zhanzhang.baidu.com/push.js'></script>-->
</head>
<body class="home blog custom-background custom-font-enabled single-author">
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/archives" title="Hexo" rel="home">首页</a>
      </h1>
    </hgroup>
</header>
      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main">
  
    <article id="post-es6" class="post-es6 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/04/06/es6/">ES6的使用</a>
    </h1>
  

        

      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h1><h2 id="块级作用域"><a href="#块级作用域" class="headerlink" title="块级作用域"></a>块级作用域</h2><p>使用 let 定义的变量在大括号的外面是访问不到的</p>
<h2 id="常量const-常量一旦赋值就不能再修改了"><a href="#常量const-常量一旦赋值就不能再修改了" class="headerlink" title="常量const  常量一旦赋值就不能再修改了"></a>常量const  常量一旦赋值就不能再修改了</h2><p>注意const限制的是不能给变量重新赋值，而变量的值本身是可以改变的,下面的操作是可以的</p>
<h2 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h2><pre><code>let desc = `${name} is ${age} old!`;
</code></pre><h2 id="剩余操作符"><a href="#剩余操作符" class="headerlink" title="剩余操作符"></a>剩余操作符</h2><p>   剩余操作符可以把其余的参数的值都放到一个叫b的数组里面</p>
<pre><code> let rest = function(a,...b){
 console.log(a,b);
}
 rest(1,2,3);    
</code></pre><h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><p>   箭头函数简化了函数的的定义方式，一般以 “=&gt;” 操作符左边为输入的参数，而右边则是进行的操作以及返回的值inputs=&gt;output</p>
<pre><code>[1,2,3].forEach(val =&gt; console.log(val)););
</code></pre><p>   输入参数如果多于一个要用()包起来，函数体如果有多条语句需要用{}包起来<br>   箭头函数根本没有自己的this，导致内部的this就是外层代码块的this。 正是因为它没有this，从而避免了this指向的问题。</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/04/06/es6/">
    <time datetime="2017-04-06T11:02:31.000Z" class="entry-date">
        2017-04-06
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/2017年04月/">2017年04月</a></li></ul>

    </footer>
</article>






  
    <article id="post-babel" class="post-babel post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/04/06/babel/">Babel的操作指南</a>
    </h1>
  

        

      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Babel是一个通用的多用途JavaScript编译器"><a href="#Babel是一个通用的多用途JavaScript编译器" class="headerlink" title="Babel是一个通用的多用途JavaScript编译器"></a>Babel是一个通用的多用途JavaScript编译器</h1><pre><code>npm install babel-cli -g  
</code></pre><h2 id="把ES6编译成-ES5"><a href="#把ES6编译成-ES5" class="headerlink" title="把ES6编译成 ES5"></a>把ES6编译成 ES5</h2><h3 id="安装依赖的预设"><a href="#安装依赖的预设" class="headerlink" title="安装依赖的预设"></a>安装依赖的预设</h3><pre><code>$ npm install --save-dev babel-preset-es2015
</code></pre><h3 id="修改-babelrc"><a href="#修改-babelrc" class="headerlink" title="修改.babelrc"></a>修改.babelrc</h3><pre><code>{
    &quot;presets&quot;: [&quot;es2015&quot;]
}
</code></pre><hr>
<pre><code>$ babel es6.js  这将把编译后的结果直接输出至终端
</code></pre><hr>
<pre><code>$ babel es6.js -o es5.js  加上-o参数 可以将结果写入到指定的文件
</code></pre><hr>
<pre><code>$ babel src -d lib 把一个目录整个编译成一个新的目录
</code></pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/04/06/babel/">
    <time datetime="2017-04-06T10:36:31.000Z" class="entry-date">
        2017-04-06
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/2017年04月/">2017年04月</a></li></ul>

    </footer>
</article>






  
    <article id="post-vue" class="post-vue post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2017/04/05/vue/">vue概述</a>
    </h1>
  

        

      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="vue介绍"><a href="#vue介绍" class="headerlink" title="vue介绍"></a>vue介绍</h1><h2 id="vue-js-是用来构建web应用接口的一个库"><a href="#vue-js-是用来构建web应用接口的一个库" class="headerlink" title="vue.js 是用来构建web应用接口的一个库"></a>vue.js 是用来构建web应用接口的一个库</h2><p>技术上，Vue.js 重点集中在MVVM模式的ViewModel层，它连接视图和数据绑定模型通过两种方式。实际的DOM操作和输出格式被抽象的方式到指令（Directives）和过滤器（Filters）</p>
<p>在哲学领域内,尽量让MVVM数据绑定API尽可能简单。模块化和可组合性也是重要的设计考虑。vue不是一个全面的框架,它被设计成简单的和灵活的。你可以用它快速原型,或混合和匹配与其他库定义前端堆栈。</p>
<p>Vue。js的API是参考了AngularJS、KnockoutJS Ractive.js Rivets.js。尽管有相似之处,我相信Vue.js提供一个有价值能够让你在现在的一些现有框架中舍取其价值</p>
<p>即使你已经熟悉其中的一些术语,建议您通过以下概念的概述,因为你的这些术语的概念可能在Vue.js的下文中有所不同</p>
<h2 id="概念概述"><a href="#概念概述" class="headerlink" title="概念概述"></a>概念概述</h2><h3 id="ViewModel"><a href="#ViewModel" class="headerlink" title="ViewModel"></a>ViewModel</h3><p>一个对象,同步模型和视图. 在Vue.js中,ViewModels是实例化的Vue的构造器或者是它的子类</p>
<p>var vm = new Vue({ /<em> options </em>/ })<br>这是主要的对象,你会与作为开发人员在使用Vue.js交互。更多细节请参阅Class: Vue.</p>
<h3 id="View"><a href="#View" class="headerlink" title="View"></a>View</h3><p>用户看到的实际HTML / DOM</p>
<p>vm.$el // The View<br>当使用Vue.js时候，除了自己自定义的指令你几乎不会触碰到DOM的操作，当数据更新后视图的更新将会自动的触发，视图的更新可以很精确的到每一个testNode节点，他们也批处理和异步执行从而提供更好的性能。</p>
<h3 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h3><p>这是一个略微修改的Javascript对象</p>
<p>vm.$data // The Model<br>在Vue.js中，模型只是简单的Javascript对象,数据对象,你能够操控他们的属性和视图模型，观察他们的从而能获取通知后更改。Vue.js在data对象胡总用ES5的 getter/setter 把属性转化了，它允许直接操作而不需要脏检查。</p>
<p>data对象在适当的时候会产生突变，所以修改它与通过引用修改vm.$data是一样的效果。这也方便了多个ViewModel实例观察同一块数据。</p>
<p>技术细节请看Instantiation Options: data.</p>
<h3 id="Directives"><a href="#Directives" class="headerlink" title="Directives"></a>Directives</h3><p>私有的HTML属性是告诉Vue.js做一些关于DOM的处理</p>
<pre><code>&lt;div v-text=&quot;message&quot;&gt;&lt;/div&gt;
这里的div元素有一个v-text的指令，值是message.意思是告诉Vue.js 保持这个div节点的内容与viewMode中的message属性同步
</code></pre><p>指令可以封装任意DOM操作。例如v-attr 操作一个属性元素,v-repeat克隆基于数组的一个元素，v-on附加事件监听，我们稍后讨论.</p>
<h3 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h3><p>在Vue.js,一个组件是一个简单的视图模型构造函数，通过Vue.component(ID, constructor)注册。通过一个关联的ID，可以嵌套另外的视图模型的模板的v-component指令。这种简单的机制使声明视图模型的重用和组合方式类似于Web组件,而不需要最新的浏览器或重型polyfills。通过将应用程序分解成更小的组件,其结果是一个高度解耦和可维护的代码库。更多细节,请参阅Composing ViewModels.</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2017/04/05/vue/">
    <time datetime="2017-04-05T06:36:31.000Z" class="entry-date">
        2017-04-05
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/2017年04月/">2017年04月</a></li></ul>

    </footer>
</article>






  
    <article id="post-Flex" class="post-Flex post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2016/12/16/Flex/">Flex弹性盒子布局</a>
    </h1>
  

        

      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Flex布局"><a href="#Flex布局" class="headerlink" title="Flex布局"></a>Flex布局</h1><h2 id="弹性盒子模型"><a href="#弹性盒子模型" class="headerlink" title="弹性盒子模型"></a>弹性盒子模型</h2><ul>
<li>采用Flex布局的元素，称为Flex容器（flex container），简称”容器”。</li>
<li>它的所有子元素自动成为容器成员，称为Flex项目（flex item），简称”项目”。</li>
</ul>
<blockquote>
<p>容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）。<br>主轴的开始位置（与边框的交叉点）叫做main start，结束位置叫做main end；<br>交叉轴的开始位置叫做cross start，结束位置叫做cross end。<br>项目默认沿主轴排列。单个项目占据的主轴空间叫做main size，占据的交叉轴空间叫做cross size。</p>
</blockquote>
<h2 id="使用flex水平垂直居中"><a href="#使用flex水平垂直居中" class="headerlink" title="使用flex水平垂直居中"></a>使用flex水平垂直居中</h2><ul>
<li>给父容器设置如下属性<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">display: flex;</div><div class="line">flex-flow:row wrap;/*flex-direction和flex-wrap的复合写法*/</div><div class="line">justify-content: center;</div><div class="line">align-items:center;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="容器的属性"><a href="#容器的属性" class="headerlink" title="容器的属性"></a>容器的属性</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">flex-direction:属性决定主轴的方向（即项目的排列方向）</div><div class="line">值：row | row-reverse | column | column-reverse;</div><div class="line"></div><div class="line">flex-wrap:如果一条轴线排不下，如何换行</div><div class="line">值：nowrap | wrap | wrap-reverse;</div><div class="line"></div><div class="line">flex-flow：属性是flex-direction属性和flex-wrap属性的简写形式，默认值为row nowrap</div><div class="line">值：&lt;flex-direction&gt; || &lt;flex-wrap&gt;;</div><div class="line"></div><div class="line">justify-content：属性定义了项目在主轴上的对齐方式。</div><div class="line">值：flex-start | flex-end | center | space-between | space-around;</div><div class="line"></div><div class="line">align-items：属性定义项目在交叉轴上如何对齐。</div><div class="line">值： flex-start | flex-end | center | baseline | stretch;</div><div class="line"></div><div class="line">align-content：属性定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用。</div><div class="line">值： flex-start | flex-end | center | space-between | space-around | stretch;</div></pre></td></tr></table></figure>
<h2 id="项目的属性"><a href="#项目的属性" class="headerlink" title="项目的属性"></a>项目的属性</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">order:属性定义项目的排列顺序。数值越小，排列越靠前，默认为0。</div><div class="line"></div><div class="line">flex-grow:属性定义项目的放大比例，默认为0，即如果存在剩余空间，也不放大。</div><div class="line"></div><div class="line">flex-shrink:属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。</div><div class="line"></div><div class="line">flex-basis:属性定义了在分配多余空间之前，项目占据的主轴空间（main size）。</div><div class="line">浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为auto，即项目的本来大小。</div><div class="line"></div><div class="line">flex属性是flex-grow, flex-shrink 和 flex-basis的简写，默认值为0 1 auto。后两个属性可选。</div><div class="line">该属性有两个快捷值：auto (1 1 auto) 和 none (0 0 auto)。</div><div class="line"></div><div class="line">align-self属性允许单个项目有与其他项目不一样的对齐方式，可覆盖align-items属性。默认值为auto，表示继承父元素的align-items属性，如果没有父元素，则等同于stretch。</div><div class="line">值：auto | flex-start | flex-end | center | baseline | stretch;</div></pre></td></tr></table></figure>
<h3 id="实现三栏布局"><a href="#实现三栏布局" class="headerlink" title="实现三栏布局"></a>实现三栏布局</h3><p><img src="/css/images/three.png" alt="3"></p>
<ul>
<li><p>给父容器添加属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">.wrap&#123;</div><div class="line">         display: flex;</div><div class="line">         flex-wrap: wrap;</div><div class="line">     &#125;</div><div class="line">     .wrap &gt;*&#123;</div><div class="line">         flex:1 100%;</div><div class="line">         height: 100px;</div><div class="line">     &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>子容器要给高度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">@media all and (min-width: 600px) &#123;</div><div class="line">    .aside&#123;</div><div class="line">      flex:1  auto;</div><div class="line">      height: 200px;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@media all and (min-width: 800px) &#123;</div><div class="line">    .main&#123;</div><div class="line">      flex:2  auto;</div><div class="line">    &#125;</div><div class="line">    .aside-1&#123;</div><div class="line">        order: -1;</div><div class="line">    &#125;</div><div class="line">    .header&#123;</div><div class="line">        order: -2;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="知识梳理图"><a href="#知识梳理图" class="headerlink" title="知识梳理图"></a>知识梳理图</h3><p><img src="/css/images/flexbox.png" alt="111"></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2016/12/16/Flex/">
    <time datetime="2016-12-16T06:36:31.000Z" class="entry-date">
        2016-12-16
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/2016年12月/">2016年12月</a></li></ul>

    </footer>
</article>






  
    <article id="post-webpack" class="post-webpack post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2016/12/15/webpack/">由浅入深了解webpack的使用</a>
    </h1>
  

        

      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h2><p>webpack是一款强大的模块加载器兼打包工具，它能把各种资源，例如JS（含JSX）、coffee、样式（含less/sass）、图片等都作为模块来使用和处理,优势如下:</p>
<ol>
<li>webpack 是以<code>commonJS</code>的形式来书写，但对AMD/CMD的支持也很全面,方便旧项目进行代码迁移</li>
<li>能被模块化的不仅仅是JS,还包括各种资源文件</li>
<li>开发便捷，能替代部分<code>gulp</code>的工作，比如打包、混淆压缩、图片转base64等</li>
<li>扩展性强，插件机制完善，特别是支持<code>React</code>热插拔</li>
</ol>
<h2 id="1-webpack命令行"><a href="#1-webpack命令行" class="headerlink" title="1. webpack命令行"></a>1. webpack命令行</h2><h3 id="1-1-全局安装webpack"><a href="#1-1-全局安装webpack" class="headerlink" title="1.1 全局安装webpack"></a>1.1 全局安装webpack</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack -g</div></pre></td></tr></table></figure>
<h3 id="1-2-本地安装webpack"><a href="#1-2-本地安装webpack" class="headerlink" title="1.2 本地安装webpack"></a>1.2 本地安装webpack</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack --save-dev</div></pre></td></tr></table></figure>
<h3 id="1-3-命令行中使用"><a href="#1-3-命令行中使用" class="headerlink" title="1.3 命令行中使用"></a>1.3 命令行中使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$    webpack index.js bundle.js</div></pre></td></tr></table></figure>
<blockquote>
<p>index.js 打包的入口文件路径<br>bundle.js 打包后的输出文件名</p>
</blockquote>
<h3 id="1-4-命令行参数"><a href="#1-4-命令行参数" class="headerlink" title="1.4 命令行参数"></a>1.4 命令行参数</h3><ul>
<li>webpack 开发环境下编译</li>
<li>webpack -p 生产环境下编译，会压缩生成后的文件</li>
<li>webpack -w 开发环境下持续的监听文件&gt;变动来进行编译</li>
<li>webpack -d 生成map映射文件,会在控制台的Sources页签中出现存放打包前原始文件的webpack://目录，可以打断点，帮助调试  <figure class="highlight plain"><figcaption><span>index.js bundle.js -d'``</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- webpack --progress 显示构建百分比进度</div><div class="line">- webpack --display-error-details 显示打包过程中的出错信息(比如 webpack寻找模块的过程)</div><div class="line">- webpack --profile 输出性能数据，可以看到每一步的耗时</div><div class="line"></div><div class="line"></div><div class="line">## 2. 使用webpack配置文件</div><div class="line"></div><div class="line">### 2.1 初始化git</div><div class="line">```javascript</div><div class="line">$ mkdir webpack-demos &amp;&amp; cd webpack-demos &amp;&amp; git init</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-2-初始化项目"><a href="#2-2-初始化项目" class="headerlink" title="2.2 初始化项目"></a>2.2 初始化项目</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm init -y</div></pre></td></tr></table></figure>
<h3 id="2-3-增加-gitignore"><a href="#2-3-增加-gitignore" class="headerlink" title="2.3 增加.gitignore"></a>2.3 增加.gitignore</h3><p>创建文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ touch.gitignore</div></pre></td></tr></table></figure></p>
<p>在文件中增加以下内容<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">node_modules</div><div class="line">.idea</div></pre></td></tr></table></figure></p>
<h3 id="2-4-在项目根目录下创建src和build目录"><a href="#2-4-在项目根目录下创建src和build目录" class="headerlink" title="2.4 在项目根目录下创建src和build目录"></a>2.4 在项目根目录下创建src和build目录</h3><p><code>src</code>目录存放源码，<code>build</code>目录存放编译打包之后的资源<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir src build</div></pre></td></tr></table></figure></p>
<h3 id="2-5-增加以下文件"><a href="#2-5-增加以下文件" class="headerlink" title="2.5 增加以下文件"></a>2.5 增加以下文件</h3><h4 id="2-5-1-src-component-js"><a href="#2-5-1-src-component-js" class="headerlink" title="2.5.1 src/component.js"></a>2.5.1 <code>src/component.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cd src &amp;&amp; touch component.js</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">exports.name = <span class="string">'zfpx'</span>;</div></pre></td></tr></table></figure>
<h4 id="2-5-2-src-index-js"><a href="#2-5-2-src-index-js" class="headerlink" title="2.5.2 src/index.js"></a>2.5.2 <code>src/index.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cd src &amp;&amp; touch index.js</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> comp = <span class="built_in">require</span>(<span class="string">'./component.js'</span>);</div><div class="line"><span class="built_in">console</span>.log(comp.name);</div></pre></td></tr></table></figure>
<h4 id="2-5-3-build-index-html"><a href="#2-5-3-build-index-html" class="headerlink" title="2.5.3 build/index.html"></a>2.5.3 <code>build/index.html</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cd build &amp;&amp; touch index.html</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;script src=<span class="string">"bundle.js"</span>&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="2-6-下载webpack"><a href="#2-6-下载webpack" class="headerlink" title="2.6 下载webpack"></a>2.6 下载<code>webpack</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack --save-dev</div></pre></td></tr></table></figure>
<h3 id="2-7-创建webpack的配置文件"><a href="#2-7-创建webpack的配置文件" class="headerlink" title="2.7 创建webpack的配置文件"></a>2.7 创建webpack的配置文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ touch webpack.config.js</div></pre></td></tr></table></figure>
<p>配置<code>webpack.config.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">     <span class="comment">//打包的入口文件  String|Object</span></div><div class="line">    entry: path.resolve(__dirname, <span class="string">'src/index.js'</span>),</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">//配置打包结果     Object</span></div><div class="line">        <span class="comment">//定义输出文件路径</span></div><div class="line">        path: path.resolve(__dirname, <span class="string">'build'</span>),</div><div class="line">        <span class="comment">//指定打包文件名称</span></div><div class="line">        filename: <span class="string">'bundle.js'</span></div><div class="line">    &#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>请注意<code>webpack.config.js</code>这个文件名是定死的，不然会报<code>Output filename not configured</code>的错误；另外，如果不按这个命名，那么在webpack运行的时候需要通过<code>--config</code>这个参数指定配置文件，比如：<code>webpack --config conf.js</code></p>
</blockquote>
<h3 id="2-8-修改-package-json"><a href="#2-8-修改-package-json" class="headerlink" title="2.8 修改 package.json"></a>2.8 修改 <code>package.json</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  "scripts": &#123;</div><div class="line"><span class="addition">+    "build": "webpack"</span></div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h3 id="2-9-执行命令进行编译"><a href="#2-9-执行命令进行编译" class="headerlink" title="2.9 执行命令进行编译"></a>2.9 执行命令进行编译</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm run build</div></pre></td></tr></table></figure>
<blockquote>
<p>build目录下会新增了一个bundle.js文件，里面就存放着打包后的目录</p>
</blockquote>
<h2 id="3-loader"><a href="#3-loader" class="headerlink" title="3. loader"></a>3. loader</h2><p>使用<code>babel-loader</code>来解析<code>es6写成的模块</code><br><a href="http://webpack.github.io/docs/using-loaders.html" target="_blank" rel="external">加载器列表</a></p>
<h3 id="3-1-安装loader"><a href="#3-1-安装loader" class="headerlink" title="3.1 安装loader"></a>3.1 安装loader</h3><p><code>babel-loader</code>可以将ES6的代码转为ES5的代码<br><a href="http://babeljs.io" target="_blank" rel="external">babel官网</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm install babel-loader babel-core --save-dev</div><div class="line">$ npm install babel-preset-es2015 babel-preset-stage-0 --save-dev</div></pre></td></tr></table></figure>
<h3 id="3-2-修改webpack-config-js"><a href="#3-2-修改webpack-config-js" class="headerlink" title="3.2 修改webpack.config.js"></a>3.2 修改<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">    ////打包的入口文件  String|Object</div><div class="line">    entry: path.resolve(__dirname, 'src/index.js'),</div><div class="line">    output: &#123;</div><div class="line">        //定义输出文件路径</div><div class="line">        path: path.resolve(__dirname, 'build'),</div><div class="line">        //指定打包文件名称</div><div class="line">        filename: 'bundle.js'</div><div class="line">    &#125;,</div><div class="line">    //定义了对模块的处理逻辑     Object</div><div class="line"><span class="addition">+    module: &#123;</span></div><div class="line"><span class="addition">+        loaders: [ 定义了一系列的加载器   Array</span></div><div class="line"><span class="addition">+            &#123;</span></div><div class="line"><span class="addition">+                test: /\.js$/, //正则，匹配到的文件后缀名</span></div><div class="line"><span class="addition">+                // loader/loaders：string|array，处理匹配到的文件</span></div><div class="line"><span class="addition">+                loader: 'babel-loader'</span></div><div class="line"><span class="addition">+                // include：String|Array  包含的文件夹</span></div><div class="line"><span class="addition">+			     // exclude：String|Array  排除的文件夹</span></div><div class="line"><span class="addition">+</span></div><div class="line"><span class="addition">+            &#125;</span></div><div class="line"><span class="addition">+        ]</span></div><div class="line"><span class="addition">+    &#125;</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<blockquote>
<p>“-loader”其实是可以省略不写的，多个loader之间用“!”连接起来<br>loaders是一个数组</p>
</blockquote>
<h3 id="3-3-添加-babelrc文件"><a href="#3-3-添加-babelrc文件" class="headerlink" title="3.3 添加.babelrc文件"></a>3.3 添加.babelrc文件</h3><p>内容如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   &quot;presets&quot;: [&quot;es2015&quot;, &quot;stage-0&quot;],</div><div class="line">   &quot;plugins&quot;: []</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="3-4-修改src-component-js"><a href="#3-4-修改src-component-js" class="headerlink" title="3.4 修改src/component.js"></a>3.4 修改<code>src/component.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-  exports.name = 'zfpx';</span></div><div class="line"><span class="addition">+  export var name = 'zfpx';</span></div></pre></td></tr></table></figure>
<h3 id="3-4-修改src-index-js"><a href="#3-4-修改src-index-js" class="headerlink" title="3.4 修改src/index.js"></a>3.4 修改<code>src/index.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-  var comp = require('./component.js');</span></div><div class="line"><span class="deletion">-  console.log(comp.name);</span></div><div class="line"><span class="addition">+  import &#123;name&#125; from './component.js';</span></div><div class="line"><span class="addition">+  console.log(name);</span></div></pre></td></tr></table></figure>
<h3 id="3-5-增加-babelrc文件"><a href="#3-5-增加-babelrc文件" class="headerlink" title="3.5 增加.babelrc文件"></a>3.5 增加<code>.babelrc</code>文件</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  "presets": ["es2015", "stage-0"],</div><div class="line">  "plugins": []</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-6-执行命令进行编译"><a href="#3-6-执行命令进行编译" class="headerlink" title="3.6 执行命令进行编译"></a>3.6 执行命令进行编译</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm run build</div></pre></td></tr></table></figure>
<h2 id="4-devServer"><a href="#4-devServer" class="headerlink" title="4. devServer"></a>4. devServer</h2><p><code>webpack-dev-server</code>是一个Web服务器,可以预览项目，并且当修改源码后可以实时刷新页面<br><a href="http://webpack.github.io/docs/webpack-dev-server.html#the-historyapifallback-option" target="_blank" rel="external">server配置</a></p>
<h3 id="4-1-安装devServer"><a href="#4-1-安装devServer" class="headerlink" title="4.1 安装devServer"></a>4.1 安装devServer</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack-dev-server --save-dev</div></pre></td></tr></table></figure>
<h3 id="4-3-修改package-json"><a href="#4-3-修改package-json" class="headerlink" title="4.3 修改package.json"></a>4.3 修改<code>package.json</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">"scripts": &#123;</div><div class="line"><span class="addition">+    "dev": "webpack-dev-server"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="4-4-配置webpack-config-js"><a href="#4-4-配置webpack-config-js" class="headerlink" title="4.4 配置webpack.config.js"></a>4.4 配置<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+    devServer: &#123;</span></div><div class="line"><span class="addition">+        stats: &#123; colors: true &#125;, //显示颜色</span></div><div class="line"><span class="addition">+        port: 8080,//端口</span></div><div class="line"><span class="addition">+        contentBase: 'build',//指定静态文件的根目录</span></div><div class="line"><span class="addition">+    &#125;</span></div></pre></td></tr></table></figure>
<h3 id="4-5-执行命令进行启动服务"><a href="#4-5-执行命令进行启动服务" class="headerlink" title="4.5 执行命令进行启动服务"></a>4.5 执行命令进行启动服务</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm run dev</div></pre></td></tr></table></figure>
<blockquote>
<p>启动此服务的时候，编译后的产出文件放在内存里,在<code>build</code>目录下看不见,但也不会删除原来已经有的文件</p>
</blockquote>
<h3 id="4-6-预览项目"><a href="#4-6-预览项目" class="headerlink" title="4.6 预览项目"></a>4.6 预览项目</h3><p>打开浏览器中访问<br><a href="http://localhost:8080" target="_blank" rel="external">http://localhost:8080</a></p>
<h3 id="4-7-proxy模拟后台接口"><a href="#4-7-proxy模拟后台接口" class="headerlink" title="4.7 proxy模拟后台接口"></a>4.7 proxy模拟后台接口</h3><h4 id="4-7-1-修改配置webpack-config-js"><a href="#4-7-1-修改配置webpack-config-js" class="headerlink" title="4.7.1 修改配置webpack.config.js"></a>4.7.1 修改配置<code>webpack.config.js</code></h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">   //重写url</div><div class="line"><span class="addition">+ function rewriteUrl(replacePath) &#123;</span></div><div class="line"><span class="addition">+     return function (req, opt) &#123;</span></div><div class="line">          //取得?所在的索引</div><div class="line"><span class="addition">+         var queryIndex = req.url.indexOf('?');</span></div><div class="line">          //取得查询字符串的内容</div><div class="line"><span class="addition">+         var query = queryIndex &gt;= 0 ? req.url.substr(queryIndex) : "";</span></div><div class="line">          //$1取自path匹配到的真实路径中的第一个分组</div><div class="line"><span class="addition">+         //把proxy的path替换为 '/$1\.json',</span></div><div class="line"><span class="addition">+         req.url = req.path.replace(opt.path, replacePath) + query;</span></div><div class="line"><span class="addition">+     &#125;;</span></div><div class="line"><span class="addition">+ &#125;</span></div><div class="line"></div><div class="line">    devServer: &#123;</div><div class="line"></div><div class="line">        stats: &#123; colors: true &#125;, //显示颜色</div><div class="line">        port: 8080,//端口</div><div class="line">        contentBase: 'build',//指定静态文件的根目录</div><div class="line"><span class="addition">+       proxy: [</span></div><div class="line"><span class="addition">+           &#123;</span></div><div class="line">                //替换符合此正则的接口路径</div><div class="line"><span class="addition">+               path: /^\/api\/(.*)/,</span></div><div class="line">                //目标域名端口</div><div class="line"><span class="addition">+               target: "http://localhost:8080/",</span></div><div class="line">                //重新定向到新的地址</div><div class="line">                //$1取自path正则匹配到的真实路径的第一个分组</div><div class="line"><span class="addition">+               rewrite: rewriteUrl('/$1\.json'),</span></div><div class="line">                 //修改来源地址</div><div class="line"><span class="addition">+               changeOrigin: true</span></div><div class="line"><span class="addition">+           &#125;</span></div><div class="line"><span class="addition">+       ]</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h4 id="4-7-2-在build目录下添加-book-json"><a href="#4-7-2-在build目录下添加-book-json" class="headerlink" title="4.7.2 在build目录下添加 book.json"></a>4.7.2 在build目录下添加 <code>book.json</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;<span class="string">"name"</span>:<span class="string">"javascript"</span>&#125;</div></pre></td></tr></table></figure>
<h4 id="4-7-3-直接访问此接口"><a href="#4-7-3-直接访问此接口" class="headerlink" title="4.7.3 直接访问此接口"></a>4.7.3 直接访问此接口</h4><p>在浏览器输入此地址<br><a href="http://localhost:8080/api/book" target="_blank" rel="external">http://localhost:8080/api/book</a><br>将会被重写向到<br><a href="http://localhost:8080/book.json" target="_blank" rel="external">http://localhost:8080/book.json</a></p>
<h2 id="5-resolve解析"><a href="#5-resolve解析" class="headerlink" title="5. resolve解析"></a>5. resolve解析</h2><h3 id="5-1-extension"><a href="#5-1-extension" class="headerlink" title="5.1 extension"></a>5.1 extension</h3><p>指定<code>extension</code>之后可以不用在<code>require</code>或是<code>import</code>的时候加文件扩展名,会依次尝试添加扩展名进行匹配</p>
<h4 id="5-1-1-修改-webpack-config-js"><a href="#5-1-1-修改-webpack-config-js" class="headerlink" title="5.1.1 修改 webpack.config.js"></a>5.1.1 修改 <code>webpack.config.js</code></h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ resolve: &#123;</span></div><div class="line">    //自动补全后缀，注意第一个必须是空字符串,后缀一定以点开头</div><div class="line"><span class="addition">+   extensions: ["",".js",".css",".json"],</span></div><div class="line"><span class="addition">+ &#125;,</span></div></pre></td></tr></table></figure>
<h4 id="5-1-2-修改src-index-js"><a href="#5-1-2-修改src-index-js" class="headerlink" title="5.1.2  修改src/index.js"></a>5.1.2  修改<code>src/index.js</code></h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">- import comp from './component.js';</span></div><div class="line"><span class="addition">+ import comp from './component';</span></div></pre></td></tr></table></figure>
<h3 id="5-2-alias"><a href="#5-2-alias" class="headerlink" title="5.2 alias"></a>5.2 alias</h3><p>配置别名可以加快<code>webpack</code>查找模块的速度</p>
<ul>
<li>每当引入<code>jquery</code>模块的时候，它会直接引入<code>jqueryPath</code>,而不需要从<code>node_modules</code>文件夹中按模块的查找规则查找</li>
<li>不需要<code>webpack</code>去解析<code>jquery.js</code>文件</li>
</ul>
<h4 id="5-2-1-先安装jquery"><a href="#5-2-1-先安装jquery" class="headerlink" title="5.2.1 先安装jquery"></a>5.2.1 先安装jquery</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install jquery --save</div></pre></td></tr></table></figure>
<h4 id="5-2-2-修改-webpack-config-js"><a href="#5-2-2-修改-webpack-config-js" class="headerlink" title="5.2.2 修改 webpack.config.js"></a>5.2.2 修改 <code>webpack.config.js</code></h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ var jqueryPath = path.join(__dirname,</span></div><div class="line"><span class="addition">+  "./node_modules/jquery/dist/jquery.js");</span></div><div class="line"></div><div class="line">resolve: &#123;</div><div class="line">       extensions: ["",".js",".css",".json"],</div><div class="line"><span class="addition">+        alias: &#123;</span></div><div class="line"><span class="addition">+            'jquery': jqueryPath</span></div><div class="line"><span class="addition">+        &#125;</span></div><div class="line">    &#125;,</div><div class="line"></div><div class="line">module: &#123;</div><div class="line">       loaders: [</div><div class="line">           &#123;</div><div class="line">               test: /\.js$/,</div><div class="line">               loader: 'babel-loader'</div><div class="line">           &#125;</div><div class="line">       ],</div><div class="line">       //如果你 确定一个模块中没有其它新的依赖 就可以配置这项，webpack 将不再扫描这个文件中的依赖</div><div class="line"><span class="addition">+       noParse: [jqueryPath]</span></div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<h4 id="5-2-3-修改-build-index-html"><a href="#5-2-3-修改-build-index-html" class="headerlink" title="5.2.3 修改 build/index.html"></a>5.2.3 修改 <code>build/index.html</code></h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ &lt;div id="app"&gt;&lt;/div&gt;</span></div></pre></td></tr></table></figure>
<h4 id="5-2-4-修改-src-index-js"><a href="#5-2-4-修改-src-index-js" class="headerlink" title="5.2.4 修改 src/index.js"></a>5.2.4 修改 <code>src/index.js</code></h4><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+import $ from 'jquery'</span></div><div class="line"><span class="deletion">- document.write(comp);</span></div><div class="line"><span class="addition">+ $('#app').html(comp);</span></div></pre></td></tr></table></figure>
<h2 id="6-解析less样式文件"><a href="#6-解析less样式文件" class="headerlink" title="6. 解析less样式文件"></a>6. 解析less样式文件</h2><h3 id="6-1-安装loader"><a href="#6-1-安装loader" class="headerlink" title="6.1 安装loader"></a>6.1 安装loader</h3><ul>
<li>less-loader负责把less源码转成css代码</li>
<li>css-loader负责读取css代码</li>
<li>style-loader负责在css代码转变成style标签并作为页内样式插入到页面中去<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install less style-loader css-loader less-loader --save-dev</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="6-2-修改配置文件webpack-config-js"><a href="#6-2-修改配置文件webpack-config-js" class="headerlink" title="6.2 修改配置文件webpack.config.js"></a>6.2 修改配置文件<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+  &#123;</span></div><div class="line"><span class="addition">+        test: /\.less/,</span></div><div class="line"><span class="addition">+        loader: 'style!css!less'</span></div><div class="line"><span class="addition">+  &#125;</span></div></pre></td></tr></table></figure>
<h3 id="6-3-增加less文件-src-index-less"><a href="#6-3-增加less文件-src-index-less" class="headerlink" title="6.3 增加less文件 src/index.less"></a>6.3 增加less文件 <code>src/index.less</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@color: red;</div><div class="line">.red &#123;</div><div class="line">  color: @color;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="6-4-在src-index-js中引入’less’文件"><a href="#6-4-在src-index-js中引入’less’文件" class="headerlink" title="6.4 在src/index.js中引入’less’文件"></a>6.4 在<code>src/index.js</code>中引入’less’文件</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+  require('./index.less');</span></div></pre></td></tr></table></figure>
<h3 id="6-5-修改build-index-html-使用red"><a href="#6-5-修改build-index-html-使用red" class="headerlink" title="6.5 修改build/index.html,使用red"></a>6.5 修改<code>build/index.html</code>,使用<code>red</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">- &lt;div id="app"&gt;&lt;/div&gt;</span></div><div class="line"><span class="addition">+ &lt;div id="app" class="red"&gt;&lt;/div&gt;</span></div></pre></td></tr></table></figure>
<h2 id="7-资源文件的加载"><a href="#7-资源文件的加载" class="headerlink" title="7. 资源文件的加载"></a>7. 资源文件的加载</h2><p>实现CSS、图标、图片等资源文件加载</p>
<h3 id="7-1-安装bootstrap和相应的loader"><a href="#7-1-安装bootstrap和相应的loader" class="headerlink" title="7.1 安装bootstrap和相应的loader"></a>7.1 安装bootstrap和相应的loader</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm install bootstrap --save</div><div class="line">$ npm install file-loader url-loader --save-dev</div></pre></td></tr></table></figure>
<h3 id="7-2-修改-webpack-config-js"><a href="#7-2-修改-webpack-config-js" class="headerlink" title="7.2 修改 webpack.config.js"></a>7.2 修改 <code>webpack.config.js</code></h3><p>设置css文件和图标文件的加载器<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"> devServer: &#123;</div><div class="line">        stats: &#123;colors: true&#125;, //显示颜色</div><div class="line"></div><div class="line"><span class="addition">+ &#123;</span></div><div class="line"><span class="addition">+     test: /\.css/,</span></div><div class="line"><span class="addition">+     loader: 'style!css'</span></div><div class="line"><span class="addition">+ &#125;,</span></div><div class="line"><span class="addition">+ &#123;</span></div><div class="line"><span class="addition">+      test: /\.(woff|woff2|ttf|svg|eot)$/,</span></div><div class="line"><span class="addition">+      loader: "url?limit=8192"</span></div><div class="line"><span class="addition">+ &#125;,</span></div><div class="line"><span class="addition">+ &#123;</span></div><div class="line"><span class="addition">+       test: /\.(jpg|png)$/,</span></div><div class="line"><span class="addition">+       loader: "url?limit=8192"</span></div><div class="line"><span class="addition">+  &#125;</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>配置信息的参数“?limit=8192”表示将所有小于8kb的图片都转为base64形式(其实应该说超过8kb的才使用<code>url-loader</code> 来映射到文件，否则转为<code>data url</code>形式)</p>
</blockquote>
<p><a href="http://www.webhek.com/data-url/" target="_blank" rel="external">DataURL和图片</a></p>
<h3 id="7-3-修改-src-index-js"><a href="#7-3-修改-src-index-js" class="headerlink" title="7.3 修改 src/index.js"></a>7.3 修改 <code>src/index.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+  import 'bootstrap/dist/css/bootstrap.css';</span></div><div class="line"><span class="addition">+  var img = document.createElement("img");</span></div><div class="line"><span class="addition">+  img.className = 'img-circle';</span></div><div class="line"><span class="addition">+  img.src = require("./zfpx.jpg");</span></div><div class="line"><span class="addition">+  document.body.appendChild(img);</span></div></pre></td></tr></table></figure>
<h3 id="7-4-修改-build-index-html"><a href="#7-4-修改-build-index-html" class="headerlink" title="7.4 修改 build/index.html"></a>7.4 修改 <code>build/index.html</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ &lt;button class="btn btn-success"&gt;bootstrap按钮&lt;/button&gt;</span></div><div class="line"><span class="addition">+ &lt;span class="glyphicon glyphicon-qrcode"&gt;&lt;/span&gt;</span></div><div class="line"><span class="addition">+ &lt;img src="/zfpx.jpg" class="img-rounded" alt="lufy"&gt;</span></div></pre></td></tr></table></figure>
<h2 id="8-自动刷新"><a href="#8-自动刷新" class="headerlink" title="8. 自动刷新"></a>8. 自动刷新</h2><p>在源码修改之后可以自动刷新页面<br>修改<code>webpack.config.js</code><br><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">         contentBase: 'build',</div><div class="line"><span class="addition">+        inline:true, //设置自动刷新</span></div><div class="line">         proxy: [</div></pre></td></tr></table></figure></p>
<h2 id="9-自动产出html"><a href="#9-自动产出html" class="headerlink" title="9. 自动产出html"></a>9. 自动产出html</h2><h3 id="9-1-创建html模板文件"><a href="#9-1-创建html模板文件" class="headerlink" title="9.1 创建html模板文件"></a>9.1 创建html模板文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cd src &amp;&amp; touch index.html</div></pre></td></tr></table></figure>
<h3 id="9-2-下载webpack插件"><a href="#9-2-下载webpack插件" class="headerlink" title="9.2 下载webpack插件"></a>9.2 下载webpack插件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install html-webpack-plugin --save-dev</div></pre></td></tr></table></figure>
<h3 id="9-3-修改webpack-config-js"><a href="#9-3-修改webpack-config-js" class="headerlink" title="9.3 修改webpack.config.js"></a>9.3 修改<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+  var HtmlWebpackPlugin = require('html-webpack-plugin');</span></div><div class="line"><span class="addition">+  plugins: [</span></div><div class="line"><span class="addition">+        new HtmlWebpackPlugin(&#123;</span></div><div class="line"><span class="addition">+          title: 'zhufeng-react',//标题</span></div><div class="line"><span class="addition">+          template: './src/index.html', //模板文件</span></div><div class="line"><span class="addition">+          filename:'./index.html' //产出后的文件名称</span></div><div class="line"><span class="addition">+        &#125;)</span></div><div class="line"><span class="addition">+  ]</span></div></pre></td></tr></table></figure>
<h2 id="10-自动打开浏览器"><a href="#10-自动打开浏览器" class="headerlink" title="10. 自动打开浏览器"></a>10. 自动打开浏览器</h2><h3 id="10-1-安装插件"><a href="#10-1-安装插件" class="headerlink" title="10.1 安装插件"></a>10.1 安装插件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install open-browser-webpack-plugin --save-dev</div></pre></td></tr></table></figure>
<h3 id="10-2-修改webpack-config-js"><a href="#10-2-修改webpack-config-js" class="headerlink" title="10.2 修改webpack.config.js"></a>10.2 修改<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ var openBrowserWebpackPlugin = require('open-browser-webpack-plugin');</span></div><div class="line"><span class="addition">+ plugin: [</span></div><div class="line"><span class="addition">+   new openBrowserWebpackPlugin(&#123; url: 'http://localhost:8080' &#125;)</span></div><div class="line"><span class="addition">+ ]</span></div></pre></td></tr></table></figure>
<h2 id="11-区分环境标识"><a href="#11-区分环境标识" class="headerlink" title="11. 区分环境标识"></a>11. 区分环境标识</h2><h3 id="11-1-在脚本中设置环境变量"><a href="#11-1-在脚本中设置环境变量" class="headerlink" title="11.1 在脚本中设置环境变量"></a>11.1 在脚本中设置环境变量</h3><p>WIN系统<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ "scripts": &#123;</span></div><div class="line"><span class="addition">+    "publish-dev": "set BUILD_ENV=dev &amp;&amp; webpack-dev-server",</span></div><div class="line"><span class="addition">+    "publish-prod": "set BUILD_ENV=prod &amp;&amp; webpack-dev-server"</span></div><div class="line"><span class="addition">+ &#125;</span></div></pre></td></tr></table></figure></p>
<p>MAC系统<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ "scripts": &#123;</span></div><div class="line"><span class="addition">+    "publish-dev": "export BUILD_ENV=dev &amp;&amp; webpack-dev-server",</span></div><div class="line"><span class="addition">+    "publish-prod": "export BUILD_ENV=prod &amp;&amp; webpack-dev-server"</span></div><div class="line"><span class="addition">+ &#125;</span></div></pre></td></tr></table></figure></p>
<h3 id="11-2-修改webpack-config-js"><a href="#11-2-修改webpack-config-js" class="headerlink" title="11.2 修改webpack.config.js"></a>11.2 修改<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ var webpack = require('webpack');</span></div><div class="line"><span class="addition">+ var definePlugin = new webpack.DefinePlugin(&#123;</span></div><div class="line"><span class="addition">+     __DEV__: (process.env.BUILD_DEV||'dev').trim() == 'dev'</span></div><div class="line"><span class="addition">+ &#125;);</span></div><div class="line"></div><div class="line"> plugins: [</div><div class="line"><span class="addition">+        definePlugin,</span></div><div class="line">        new HtmlWebpackPlugin</div></pre></td></tr></table></figure>
<h2 id="12-暴露全局对象"><a href="#12-暴露全局对象" class="headerlink" title="12. 暴露全局对象"></a>12. 暴露全局对象</h2><h3 id="12-1-安装暴露组件"><a href="#12-1-安装暴露组件" class="headerlink" title="12.1 安装暴露组件"></a>12.1 安装暴露组件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install expose-loader --save-dev</div></pre></td></tr></table></figure>
<h3 id="12-2-暴露到全局对象"><a href="#12-2-暴露到全局对象" class="headerlink" title="12.2 暴露到全局对象"></a>12.2 暴露到全局对象</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+            &#123;</span></div><div class="line"><span class="addition">+                test: /jquery.js$/,</span></div><div class="line"><span class="addition">+                loader: "expose?jQuery"</span></div><div class="line"><span class="addition">+            &#125;</span></div></pre></td></tr></table></figure>
<h3 id="12-3-在html中使用"><a href="#12-3-在html中使用" class="headerlink" title="12.3 在html中使用"></a>12.3 在html中使用</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ &lt;script&gt;</span></div><div class="line"><span class="addition">+     console.log(window.jQuery);</span></div><div class="line"><span class="addition">+ &lt;/script&gt;</span></div></pre></td></tr></table></figure>
<h2 id="13-css文件单独加载"><a href="#13-css文件单独加载" class="headerlink" title="13. css文件单独加载"></a>13. css文件单独加载</h2><h3 id="13-1-安装插件"><a href="#13-1-安装插件" class="headerlink" title="13.1 安装插件"></a>13.1 安装插件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install extract-text-webpack-plugin --save-dev</div></pre></td></tr></table></figure>
<h3 id="13-2-修改webpack-config-js"><a href="#13-2-修改webpack-config-js" class="headerlink" title="13.2 修改webpack.config.js"></a>13.2 修改<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+      var ExtractTextPlugin = require("extract-text-webpack-plugin");</span></div><div class="line"></div><div class="line"><span class="addition">+      &#123;</span></div><div class="line"><span class="addition">+           test: /\.less/,</span></div><div class="line"><span class="addition">+           loader: ExtractTextPlugin.extract("style-loader"</span></div><div class="line">                     , "css-loader!less-loader")</div><div class="line"><span class="addition">+      &#125;,</span></div><div class="line"><span class="addition">+      &#123;</span></div><div class="line"><span class="addition">+           test: /\.css/,</span></div><div class="line"><span class="addition">+           loader: ExtractTextPlugin.extract("style-loader"</span></div><div class="line">                     , "css-loader")</div><div class="line"><span class="addition">+      &#125;</span></div><div class="line"></div><div class="line">        plugins: [</div><div class="line">        definePlugin,</div><div class="line"><span class="addition">+        new ExtractTextPlugin("bundle.css"),</span></div></pre></td></tr></table></figure>
<h2 id="14-应用代码和第三方代码分离"><a href="#14-应用代码和第三方代码分离" class="headerlink" title="14. 应用代码和第三方代码分离"></a>14. 应用代码和第三方代码分离</h2><h3 id="14-1-修改webpack-config-js"><a href="#14-1-修改webpack-config-js" class="headerlink" title="14.1 修改webpack.config.js"></a>14.1 修改<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">- entry: path.resolve(__dirname, 'src/index.js'),//入口文件</span></div><div class="line"><span class="addition">+ entry: &#123;</span></div><div class="line"><span class="addition">+        index:path.resolve(__dirname, 'src/index.js'),</span></div><div class="line"><span class="addition">+        vendor: ['jquery'],</span></div><div class="line"><span class="addition">+    &#125;</span></div><div class="line"> output: &#123;</div><div class="line">        path: path.resolve(__dirname, 'build'),//输出路径</div><div class="line"><span class="deletion">-        filename: 'bundle.js' //输出文件名</span></div><div class="line"><span class="addition">+        filename: '[name].js' //输出动态文件名</span></div><div class="line">    &#125;,</div><div class="line">//如果没有这句话，vendor只是一个普通的入口文件而矣,有了此语句会把vendor中的模块</div><div class="line">//从index中分离出来,不再包含在打包出来的index.js中,会成生一个zfvendor.js文件</div><div class="line"><span class="addition">+ new webpack.optimize.CommonsChunkPlugin('vendor', 'zfvendor.js'),</span></div></pre></td></tr></table></figure>
<h2 id="15-提取其它公共的代码"><a href="#15-提取其它公共的代码" class="headerlink" title="15. 提取其它公共的代码"></a>15. 提取其它公共的代码</h2><h3 id="15-1-增加a-js和b-js"><a href="#15-1-增加a-js和b-js" class="headerlink" title="15.1 增加a.js和b.js"></a>15.1 增加<code>a.js</code>和<code>b.js</code></h3><ul>
<li><p>components.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">export var  name = &apos;zfpx&apos;;</div><div class="line">export var  age = 8;</div></pre></td></tr></table></figure>
</li>
<li><p>a.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var &#123;name&#125; = require(&apos;./component&apos;);</div><div class="line">console.log(name);</div></pre></td></tr></table></figure>
</li>
<li><p>b.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var &#123;name&#125; = require(&apos;./component&apos;);</div><div class="line">console.log(age);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="15-2-修改webpack-config-js"><a href="#15-2-修改webpack-config-js" class="headerlink" title="15.2 修改webpack.config.js"></a>15.2 修改<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">    entry: &#123;</div><div class="line"><span class="addition">+        a:path.resolve('src/a.js'),</span></div><div class="line"><span class="addition">+        b: path.resolve('src/b.js')</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"><span class="deletion">-   new webpack.optimize.CommonsChunkPlugin('vendor', 'vendor.js'),</span></div><div class="line"><span class="addition">+   new webpack.optimize.CommonsChunkPlugin('common.js'),</span></div><div class="line"></div><div class="line">  plugins:[</div><div class="line"><span class="addition">+    new htmlWebpackPlugin(&#123;</span></div><div class="line"><span class="addition">+                title:'珠峰Webpack',</span></div><div class="line"><span class="addition">+                template:'./src/index.html',</span></div><div class="line"><span class="addition">+                filename:'./a.html',</span></div><div class="line"><span class="addition">+                chunks:['a','common.js']//包含产出的资源</span></div><div class="line"><span class="addition">+           &#125;),</span></div><div class="line"><span class="addition">+    new htmlWebpackPlugin(&#123;</span></div><div class="line"><span class="addition">+                title:'珠峰Webpack',</span></div><div class="line"><span class="addition">+                template:'./src/index.html',</span></div><div class="line"><span class="addition">+                filename:'./b.html',</span></div><div class="line"><span class="addition">+                chunks:['b','common.js']//包含产出的资源</span></div><div class="line"><span class="addition">+            &#125;)</span></div><div class="line">   ]</div></pre></td></tr></table></figure>
<h2 id="16-添加哈希值"><a href="#16-添加哈希值" class="headerlink" title="16. 添加哈希值"></a>16. 添加哈希值</h2><h3 id="16-1-修改webpack-config-js"><a href="#16-1-修改webpack-config-js" class="headerlink" title="16.1 修改webpack.config.js"></a>16.1 修改<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">- filename: '[name].js' //输出文件名</span></div><div class="line"><span class="addition">+ filename: '[name].[hash].js' //输出文件名</span></div></pre></td></tr></table></figure>
<h2 id="17-压缩资源"><a href="#17-压缩资源" class="headerlink" title="17. 压缩资源"></a>17. 压缩资源</h2><h3 id="17-1-修改webpack-config-js"><a href="#17-1-修改webpack-config-js" class="headerlink" title="17.1 修改webpack.config.js"></a>17.1 修改<code>webpack.config.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+        new webpack.optimize.UglifyJsPlugin(&#123;</span></div><div class="line"><span class="addition">+            compress: &#123;</span></div><div class="line"><span class="addition">+                warnings: false</span></div><div class="line"><span class="addition">+            &#125;</span></div><div class="line"><span class="addition">+        &#125;),</span></div><div class="line"><span class="addition">+        new webpack.optimize.MinChunkSizePlugin(&#123;</span></div><div class="line"><span class="addition">+            compress: &#123;</span></div><div class="line"><span class="addition">+                warnings: false</span></div><div class="line"><span class="addition">+            &#125;</span></div><div class="line"><span class="addition">+        &#125;),</span></div><div class="line"><span class="addition">+        // 查找相等或近似的模块，避免在最终生成的文件中出现重复的模块</span></div><div class="line"><span class="addition">+        new webpack.optimize.DedupePlugin(),</span></div><div class="line"><span class="addition">+        // 按引用频度来排序 ID，以便达到减少文件大小的效果</span></div><div class="line"><span class="addition">+        new webpack.optimize.OccurenceOrderPlugin(),</span></div><div class="line"><span class="addition">+        new webpack.optimize.AggressiveMergingPlugin(&#123;</span></div><div class="line"><span class="addition">+            minSizeReduce: 1.5,</span></div><div class="line"><span class="addition">+            moveToParents: true</span></div><div class="line"><span class="addition">+        &#125;)</span></div></pre></td></tr></table></figure>
<h2 id="18-打包react"><a href="#18-打包react" class="headerlink" title="18. 打包react"></a>18. 打包react</h2><h3 id="18-1-安装"><a href="#18-1-安装" class="headerlink" title="18.1 安装"></a>18.1 安装</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install react react-dom babel-preset-react --save-dev</div></pre></td></tr></table></figure>
<h3 id="18-2-增加webpack-config-react-js"><a href="#18-2-增加webpack-config-react-js" class="headerlink" title="18.2 增加webpack.config.react.js"></a>18.2 增加<code>webpack.config.react.js</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="keyword">var</span> openBrowserWebpackPlugin = <span class="built_in">require</span>(<span class="string">'open-browser-webpack-plugin'</span>);</div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">entry</span>: path.resolve(__dirname,<span class="string">'react/index.js'</span>),</div><div class="line">    <span class="attr">output</span>: &#123;</div><div class="line">        <span class="attr">path</span>: path.resolve(__dirname, <span class="string">'build'</span>),<span class="comment">//输出路径</span></div><div class="line">        filename: <span class="string">'bundle.js'</span> <span class="comment">//输出文件名</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">module</span>: &#123;</div><div class="line">        <span class="attr">loaders</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="attr">test</span>: <span class="regexp">/\.jsx?$/</span>,</div><div class="line">                <span class="attr">loader</span>: <span class="string">'babel'</span>,</div><div class="line">                <span class="attr">query</span>: &#123; <span class="attr">presets</span>: [<span class="string">"es2015"</span>,<span class="string">"react"</span>] &#125;,</div><div class="line">                <span class="attr">exclude</span>:<span class="regexp">/node_modules/</span>,</div><div class="line">                <span class="attr">include</span>:path.resolve(__dirname,<span class="string">'react'</span>)</div><div class="line">            &#125;</div><div class="line">        ],</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">devServer</span>: &#123;</div><div class="line">        <span class="attr">inline</span>:<span class="literal">true</span>,</div><div class="line">        <span class="attr">stats</span>: &#123;<span class="attr">colors</span>: <span class="literal">true</span>&#125;, <span class="comment">//显示颜色</span></div><div class="line">        port: <span class="number">8080</span>,<span class="comment">//端口</span></div><div class="line">        contentBase: <span class="string">'build'</span>,<span class="comment">//指定静态文件的根目录</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">            <span class="attr">title</span>: <span class="string">'珠峰React课程'</span>,</div><div class="line">            <span class="attr">template</span>: <span class="string">'./react/index.html'</span></div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> openBrowserWebpackPlugin(&#123; <span class="attr">url</span>: <span class="string">'http://localhost:8080'</span> &#125;),</div><div class="line">    ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="关于babel的预设有三种传参方法"><a href="#关于babel的预设有三种传参方法" class="headerlink" title="关于babel的预设有三种传参方法"></a>关于babel的预设有三种传参方法</h4><ol>
<li>在<code>.babelrc</code> 中配置 <code>&quot;presets&quot;: [&quot;es2015&quot;, &quot;stage-0&quot;,&quot;react&quot;],</code></li>
<li>在loader中增加 <code>query: { presets: [&quot;es2015&quot;,&quot;react&quot;] },</code>,这会对所有的loader生效</li>
<li><code>loaders: [&#39;react-hot&#39;,&#39;babel?presets[]=es2015&amp;presets[]=react&#39;]</code> 只针对某个loader生效</li>
</ol>
<h3 id="18-3-在package-json中增加"><a href="#18-3-在package-json中增加" class="headerlink" title="18.3 在package.json中增加"></a>18.3 在package.json中增加</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ "scripts": &#123;</span></div><div class="line"><span class="addition">+     "build-react": "webpack --config webpack.config.react.js",</span></div><div class="line"><span class="addition">+     "start-react":"webpack-dev-server --config webpack.config.react.js"</span></div><div class="line"><span class="addition">+   &#125;</span></div></pre></td></tr></table></figure>
<h3 id="18-4-启动服务"><a href="#18-4-启动服务" class="headerlink" title="18.4 启动服务"></a>18.4 启动服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run start-react</div></pre></td></tr></table></figure>
<h2 id="19-react模块热加载"><a href="#19-react模块热加载" class="headerlink" title="19. react模块热加载"></a>19. react模块热加载</h2><h3 id="19-1-安装"><a href="#19-1-安装" class="headerlink" title="19.1 安装"></a>19.1 安装</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install react-hot-loader --save-dev</div></pre></td></tr></table></figure>
<h3 id="19-2-修改webpack-config-react-js"><a href="#19-2-修改webpack-config-react-js" class="headerlink" title="19.2 修改webpack.config.react.js"></a>19.2 修改<code>webpack.config.react.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">     test: /\.jsx?$/,</div><div class="line"><span class="deletion">-    loaders: ['babel?presets[]=es2015&amp;presets[]=react'],</span></div><div class="line"><span class="deletion">-     query: &#123; presets: ["es2015","react"] &#125;,</span></div><div class="line"><span class="addition">+     loaders: ['react-hot','babel?presets[]=es2015&amp;presets[]=react'],</span></div><div class="line">      exclude:/node_modules/,</div><div class="line">      include:path.resolve(__dirname,'react')</div><div class="line">     &#125;</div><div class="line">     devServer: &#123;</div><div class="line"><span class="addition">+       hot:true,</span></div><div class="line">        inline:true,</div><div class="line">     plugins: [</div><div class="line"><span class="addition">+    new webpack.HotModuleReplacementPlugin()</span></div><div class="line">      ]</div></pre></td></tr></table></figure>
<blockquote>
<p>注意: 如果有多个loader的话，就不可以用query属性传参了，只能用?查询字符串传参数</p>
</blockquote>
<h3 id="19-4-启动服务"><a href="#19-4-启动服务" class="headerlink" title="19.4 启动服务"></a>19.4 启动服务</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run start-react</div></pre></td></tr></table></figure>
<blockquote>
<p>只要修改了源代码，就会在不刷新页面的情况下刷新某个组件</p>
</blockquote>
<h2 id="20-重命名类名"><a href="#20-重命名类名" class="headerlink" title="20 重命名类名"></a>20 重命名类名</h2><p>为了避免不同的组件使用的类名重复可以对这些类名进行重命名</p>
<h3 id="20-1-增加style-css文件"><a href="#20-1-增加style-css文件" class="headerlink" title="20.1 增加style.css文件"></a>20.1 增加<code>style.css</code>文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.red&#123;</div><div class="line">    <span class="attr">color</span>:green;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="20-2-修改webpack-config-react-js"><a href="#20-2-修改webpack-config-react-js" class="headerlink" title="20.2 修改webpack.config.react.js"></a>20.2 修改<code>webpack.config.react.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+ &#123;</span></div><div class="line"><span class="addition">+  test: /\.css/,</span></div><div class="line"><span class="addition">+  loaders: [ 'style-loader',</span></div><div class="line"><span class="addition">+   'css-loader?modules&amp;localIdentName=[name]__[local]___[hash:base64:5]']</span></div><div class="line"><span class="addition">+ &#125;</span></div></pre></td></tr></table></figure>
<h3 id="20-3-修改-react-app-js"><a href="#20-3-修改-react-app-js" class="headerlink" title="20.3 修改 react/app.js"></a>20.3 修改 <code>react/app.js</code></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+    import styles from './style.css'</span></div><div class="line">     export default class App extends React.Component&#123;</div><div class="line">         render()&#123;</div><div class="line">             return (</div><div class="line"><span class="deletion">-                &lt;h1&gt;欢迎光临珠峰培训&lt;/h1&gt;</span></div><div class="line"><span class="addition">+                &lt;h1 className=&#123;styles.red&#125;&gt;欢迎光临珠峰培训&lt;/h1&gt;</span></div><div class="line">            )</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2016/12/15/webpack/">
    <time datetime="2016-12-15T12:06:31.000Z" class="entry-date">
        2016-12-15
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/2016年12月/">2016年12月</a></li></ul>

    </footer>
</article>






  
    <article id="post-gulp" class="post-gulp post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2016/12/15/gulp/">gulp 的四个核心api</a>
    </h1>
  

        

      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="1-什么是gulp"><a href="#1-什么是gulp" class="headerlink" title="1. 什么是gulp"></a>1. 什么是gulp</h2><p><code>gulp</code>是可以自动化执行任务的工具<br>在平时开发的流程里面,一定有一些任务需要手工重复得执行，比如:</p>
<ul>
<li>把文件从开发目录<strong>拷贝</strong>到生产目录</li>
<li>把多个 JS 或者 CSS 文件<strong>合并</strong>成一个文件</li>
<li>对JS文件和CSS进行<strong>压缩</strong></li>
<li>把<code>sass</code>或者<code>less</code>文件<strong>编译</strong>成<code>CSS</code></li>
<li><strong>压缩图像</strong>文件</li>
<li>创建一个可以<strong>实时刷新</strong>页面内容的本地服务器</li>
</ul>
<p>只要你觉得有些动作是要<strong>重复</strong>去做的,就可以把这些动作创建成一个gulp任务<br>然后在指定的条件下自动执行<br>比如在less源文件发生改变后自动编译成css文件</p>
<h2 id="2-gulp特点"><a href="#2-gulp特点" class="headerlink" title="2. gulp特点"></a>2. gulp特点</h2><ul>
<li><strong>易于使用</strong> 通过代码优于配置的策略，Gulp 让简单的任务简单，复杂的任务可管理。</li>
<li><strong>快速构建</strong> 利用 node.js 流的威力，你可以快速构建项目并减少频繁的 IO 操作。前一级的输出，直接变成后一级的输入，使得在操作上非常简单</li>
<li><strong>高质量的插件</strong> Gulp 严格的插件指南确保插件如你期望的那样简洁地工作。</li>
<li><strong>易于学习</strong> 通过最少的 API，掌握 gulp 毫不费力，构建工作尽在掌握。</li>
</ul>
<h2 id="3-流"><a href="#3-流" class="headerlink" title="3. 流"></a>3. 流</h2><h3 id="3-1-流的概念"><a href="#3-1-流的概念" class="headerlink" title="3.1 流的概念"></a>3.1 流的概念</h3><ul>
<li><strong>Stream</strong>是<code>nodejs</code>各种对象实现的抽象接口。</li>
<li>所有的<code>stream</code>对象都是<code>EventEmitter</code>的实例,可以发射事件。</li>
<li>流是一种有<strong>起点</strong>和<strong>终点</strong>的<strong>数据传输</strong>手段。</li>
<li>上一个的<strong>输出</strong>是下一个的<strong>输入</strong></li>
</ul>
<p><img src="http://7xjf2l.com2.z0.glb.qiniucdn.com/eat.jpg" class="img-responsive"></p>
<h3 id="3-2-gulp中的流"><a href="#3-2-gulp中的流" class="headerlink" title="3.2 gulp中的流"></a>3.2 gulp中的流</h3><ul>
<li>gulp正是通过<strong>代码</strong>优于配置的策略来尽量简化任务编写的工作。</li>
<li>类似<code>jquery</code>里的<strong>链式</strong>操作，把各个方法串连起来构建完整的任务。</li>
<li>用gulp编写任务也可看作是用<code>Node.js</code>代码编写任务。</li>
<li>当使用流时,gulp不需要生成大量的<strong>中间</strong>文件，只将最后的输出写入磁盘，整个过程因此变得非常快。</li>
</ul>
<h2 id="3-安装gulp"><a href="#3-安装gulp" class="headerlink" title="3. 安装gulp"></a>3. 安装gulp</h2><p>在项目里使用gulp需要</p>
<ul>
<li>安装node</li>
<li>在全局范围内去安装一下gulp的命令行工具</li>
<li>然后在项目里面再去本地安装gulp</li>
</ul>
<h3 id="5-1-安装node"><a href="#5-1-安装node" class="headerlink" title="5.1 安装node"></a>5.1 安装node</h3><p>gulp是基于Nodejs的自动任务运行器<br>安装Gulp和相关行件用的都是node的包管理工具<code>npm</code><br>所以你需要先在电脑上安装 node,确定在命令行工具的下面可以使用npm这个命令，这样就能去安装Gulp了</p>
<p><a href="https://nodejs.org/en/" target="_blank" rel="external">node.js官网</a></p>
<p>安装好以后，我们可以打开命令行工具，mac 用户可以使用终端工具，windows 用户可以找到cmd命令行工具。</p>
<h3 id="5-2-gulp-命令行工具"><a href="#5-2-gulp-命令行工具" class="headerlink" title="5.2 gulp 命令行工具"></a>5.2 gulp 命令行工具</h3><ul>
<li>使用 <code>npm install</code> 去安装  gulp，注意加上一个 <code>-g</code> 的参数，表示在全局范围内去安装.</li>
<li>一般用 npm 安装的时候用一个 -g 的参数就表示，这个安装的东西会作为命令去执行。</li>
<li>如果你在mac或linux下遇到了权限问题,在下面这个命令的前面加上 <code>sudo npm install gulp -g</code> 并输入mac密码。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g gulp</div></pre></td></tr></table></figure>
</li>
</ul>
<p>安装完成后可以输入 <code>gulp --help</code><br>如果输出一些帮助的信息就表示可以gulp命令行成功安装了</p>
<p>如果安装不上可以换一下源试试</p>
<ul>
<li>淘宝源<br>npm install -g gulp –registry=<a href="http://registry.npm.taobao.org" target="_blank" rel="external">http://registry.npm.taobao.org</a></li>
<li>中国源<br>npm install -g gulp –registry=<a href="http://registry.cnpmjs.org" target="_blank" rel="external">http://registry.cnpmjs.org</a></li>
<li>官方源<br>npm install -g gulp –registry=<a href="http://www.npmjs.org/" target="_blank" rel="external">http://www.npmjs.org/</a></li>
</ul>
<h3 id="5-3-gulp本地安装"><a href="#5-3-gulp本地安装" class="headerlink" title="5.3 gulp本地安装"></a>5.3 gulp本地安装</h3><ol>
<li><p>先创建一个目录<br>在 <strong>mac</strong> 和 <strong>linux</strong> 操作系统下创建一个文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir learngulp</div></pre></td></tr></table></figure>
</li>
<li><p>使用 <code>cd</code> 命令进入此目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cd learngulp</div></pre></td></tr></table></figure>
</li>
<li><p>创建项目描述文件<code>package.json</code><br>项目需要一个叫<code>package.json</code>的文件来管理项目的配置,可以使用 <code>npm init</code> 这个命令生成</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ npm init</div><div class="line"></div><div class="line">	name: (zhufeng_automation) learngulp //项目名称</div><div class="line">	version: (1.0.0) 1.0.0   //项目版本号</div><div class="line">	description: learn gulp //项目说明</div><div class="line">	entry point: (index.js) index.js // 入口文件</div><div class="line">	test command: test.js //测试脚本 执行npm test时会执行此文件</div><div class="line">	git repository: (https://github.git) //模块的git仓库</div><div class="line">	keywords: node.js gulp  //在npmjs官网搜索时的关键字</div><div class="line">	author: zhufengpeixun //项目作者名字</div><div class="line">	license: (ISC) MIT //授权协议</div><div class="line">	About to write to D:\mygit\zhufeng_automation\package.json:</div><div class="line">	Is this ok? (yes) yes //直接回车确认</div></pre></td></tr></table></figure>
</li>
</ol>
<p>回车后会在当前目录下创建一个 <strong>package.json</strong> 文件</p>
<h2 id="4-安装gulp"><a href="#4-安装gulp" class="headerlink" title="4. 安装gulp"></a>4. 安装gulp</h2><ol>
<li>本地安装gulp到开发依赖中<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install gulp --save-dev</div></pre></td></tr></table></figure>
</li>
</ol>
<p>这样可以把 gulp 作为项目的开发依赖(只在开发时用，不会发布到线上)<br>第一会在<code>node_modules</code>下安装本地的<code>gulp</code>库<br>第二会把并把添加配置到<code>package.json</code>文件里面</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">    "devDependencies": &#123;</div><div class="line"><span class="addition">+        "gulp": "^3.9.0"</span></div><div class="line">      &#125;</div></pre></td></tr></table></figure>
<h2 id="5-运行gulp"><a href="#5-运行gulp" class="headerlink" title="5. 运行gulp"></a>5. 运行gulp</h2><h3 id="5-1-创建配置文件"><a href="#5-1-创建配置文件" class="headerlink" title="5.1 创建配置文件"></a>5.1 创建配置文件</h3><p>gulp的任务要放到一个叫 <code>gulpfile.js</code> 的文件里面<br>先在项目的根目录下面创建一个这样的文件<br>然后在这个文件的顶部添加下面这行代码<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="addition">+   var gulp = require('gulp');</span></div></pre></td></tr></table></figure></p>
<p>通过<code>require</code>可以把<code>gulp</code>模块引入当前项目并赋值给<code>gulp</code>变量<br>这样<code>gulp</code>这个变量里面就会拥有gulp的所有的方法了</p>
<h3 id="5-2-创建gulp的任务"><a href="#5-2-创建gulp的任务" class="headerlink" title="5.2 创建gulp的任务"></a>5.2 创建gulp的任务</h3><p>可以使用gulp的task方法<br>同样我们去创建一个叫 hello 的任务，它要做的事就是在控制台上输出 <strong>“您好”</strong> 这两个字</p>
<ol>
<li>第一个参数是任务的名称</li>
<li>第二个参数是任务的定义,是一个匿名函数<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'hello'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'您好'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="5-3-执行gulp任务"><a href="#5-3-执行gulp任务" class="headerlink" title="5.3 执行gulp任务"></a>5.3 执行gulp任务</h3><p>打开命令行工具，进入到项目所在的目录，然后输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gulp hello</div></pre></td></tr></table></figure></p>
<p>会返回：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[21:36:34] Starting &apos;hello&apos;...</div><div class="line">您好</div><div class="line">[21:36:34] Finished &apos;hello&apos; after 959 μs</div></pre></td></tr></table></figure></p>
<p>gulp后面跟着的是任务的名称<br>不输入任务名称的话会默认找<code>default</code>任务，找不到会报错</p>
<h3 id="5-4-执行其它任务"><a href="#5-4-执行其它任务" class="headerlink" title="5.4 执行其它任务"></a>5.4 执行其它任务</h3><p>可以使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gulp &lt;task&gt; &lt;othertask&gt;</div></pre></td></tr></table></figure></p>
<h2 id="6-gulp参数"><a href="#6-gulp参数" class="headerlink" title="6. gulp参数"></a>6. gulp参数</h2><p>gulp 只有你需要熟知的参数标记，其他所有的参数标记只在一些任务需要的时候使用。</p>
<ul>
<li>-v 或 –version 会显示全局和项目本地所安装的 gulp<strong>版本号</strong></li>
<li>–gulpfile <gulpfile path=""> 手动指定一个 gulpfile 的<strong>路径</strong>，这在你有很多个 gulpfile 的时候很有用。这也会将 CWD 设置到该 gulpfile 所在目录</gulpfile></li>
<li>–cwd dirpath 手动指定 CWD。定义 gulpfile <strong>查找的位置</strong>，此外，所有的相应的依赖（require）会从这里开始计算相对路径</li>
<li>-T 或 –tasks 会显示所指定 gulpfile 的 task <strong>依赖树</strong></li>
<li>–color 强制 gulp 和 gulp 插件<strong>显示颜色</strong>，即便没有颜色支持</li>
<li>–no-color 强制<strong>不显示颜色</strong>，即便检测到有颜色支持</li>
<li>–silent <strong>禁止</strong>所有的 gulp <strong>日志</strong></li>
</ul>
<h2 id="7-gulp-js工作方式"><a href="#7-gulp-js工作方式" class="headerlink" title="7. gulp.js工作方式"></a>7. gulp.js工作方式</h2><p>gulp的使用流程一般是</p>
<ol>
<li>首先通过gulp.src()方法获取到想要处理的文件流</li>
<li>然后把文件流通过pipe方法导入到gulp的插件中</li>
<li>最后把经过插件处理后的流再通过pipe方法导入到gulp.dest()中</li>
<li>gulp.dest()方法则把流中的内容写入到文件中</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line">gulp.src(<span class="string">'script/src.js'</span>)             <span class="comment">// 获取文件的流的api</span></div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/dest.js'</span>)); <span class="comment">// 写文件的api</span></div></pre></td></tr></table></figure>
<h2 id="8-gulp核心API"><a href="#8-gulp核心API" class="headerlink" title="8. gulp核心API"></a>8. gulp核心API</h2><p>gulp只有4个核心API</p>
<h3 id="8-1-gulp-src"><a href="#8-1-gulp-src" class="headerlink" title="8.1 gulp.src()"></a>8.1 gulp.src()</h3><p>在Gulp中，使用的是Nodejs中的stream(流)，首先获取到需要的stream<br>然后可以通过stream的<code>pipe</code>方法把流导入到你想要的地方<br>比如Gulp的<strong>插件</strong>中,经过插件处理后的流又可以继续导入到其他插件中，当然也可以把流写入到<strong>文件</strong>中<br>所以Gulp是以stream为媒介的，它不需要频繁的生成<strong>临时文件</strong>，这也是Gulp的速度快的一个原因<br><code>gulp.src()</code>方法正是用来获取流的</p>
<p>但要注意这个流里的内容不是原始的文件流,而是一个<strong>虚拟文件对象流</strong>,这个虚拟文件对象中存储着原始文件的路径、文件名和内容等信息<br><a href="https://github.com/gulpjs/vinyl" target="_blank" rel="external">vinyl</a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> File = <span class="built_in">require</span>(<span class="string">'vinyl'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> indexFile = <span class="keyword">new</span> File(&#123;</div><div class="line">    <span class="attr">cwd</span>: <span class="string">"/"</span>,</div><div class="line">    <span class="attr">base</span>: <span class="string">"/test/"</span>,</div><div class="line">    <span class="attr">path</span>: <span class="string">"/test/index.js"</span>,</div><div class="line">    <span class="attr">contents</span>: <span class="keyword">new</span> Buffer(<span class="string">"name=zfpx"</span>)</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(File.isVinyl(indexFile));</div><div class="line"><span class="built_in">console</span>.log(indexFile.isBuffer());</div><div class="line"><span class="built_in">console</span>.log(indexFile.isStream());</div></pre></td></tr></table></figure></p>
<p>其语法为：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp.src(globs[, options])</div></pre></td></tr></table></figure></p>
<ul>
<li><strong>globs</strong>  参数是文件匹配模式(类似正则表达式)，用来匹配文件路径(包括文件名)，当然这里也可以直接指定某个具体的文件路径。当有多个匹配模式时，该参数可以为一个数组</li>
<li><strong>options</strong>  为可选参数。通常情况下我们不需要用到</li>
</ul>
<h3 id="8-2-glob语法"><a href="#8-2-glob语法" class="headerlink" title="8.2 glob语法"></a>8.2 glob语法</h3><p>gulp内部使用了<code>node-glob</code>模块来实现其文件匹配功能。我们可以使用下面这些特殊的字符来匹配我们想要的文件：</p>
<h4 id="8-2-1-glob规则"><a href="#8-2-1-glob规则" class="headerlink" title="8.2.1 glob规则"></a>8.2.1 glob规则</h4><table><br><tr><td>匹配符</td><td>说明</td></tr><br><tr><td><em></em></td><td>匹配文件路径中的0个或多个字符，但不会匹配路径分隔符</td></tr><br><tr><td>**</td><td>匹配路径中的0个或多个目录及其子目录</td></tr><br><tr><td>?</td><td>匹配文件路径中的一个字符(不会匹配路径分隔符)</td></tr><br><tr><td>[…]</td><td>匹配方括号中出现的字符中的任意一个，当方括号中第一个字符为^或!时，则表示不匹配方括号中出现的其他字符中的任意一个</td></tr><br><tr><td>!(pattern|pattern|pattern)</td><td>匹配任何与括号中给定的任一模式都不匹配的</td></tr><br><tr><td>?(pattern|pattern|pattern)</td><td>匹配括号中给定的任一模式0次或1次，类似于js正则中的(pattern|pattern|pattern)?</td></tr><br><tr><td>+(pattern|pattern|pattern)</td><td>匹配括号中给定的任一模式至少1次，类似于js正则中的(pattern|pattern|pattern)+</td></tr><br><tr><td>(pattern|pattern|pattern)</td><td>匹配括号中给定的任一模式0次或多次，类似于js正则中的(pattern|pattern|pattern)*</td></tr><br><tr><td>@(pattern|pattern|pattern)</td><td>匹配括号中给定的任一模式1次，类似于js正则中的(pattern|pattern|pattern)</td></tr><br></table>

<h4 id="8-2-2-glob示例"><a href="#8-2-2-glob示例" class="headerlink" title="8.2.2 glob示例"></a>8.2.2 glob示例</h4><table><br><tr><td>glob</td><td>匹配</td></tr><br><tr><td>*</td><td>能匹配 a.js,x.y,abc,abc/,但不能匹配a/b.js</td></tr><br><tr><td>*.*</td><td>a.js,style.css,a.b,x.y</td></tr><br><tr><td>*/*/*.js</td><td>能匹配 a/b/c.js,x/y/z.js,不能匹配a/b.js,a/b/c/d.js</td></tr><br><tr><td>**</td><td>能匹配 abc,a/b.js,a/b/c.js,x/y/z,x/y/z/a.b,能用来匹配所有的目录和文件</td></tr><br><tr><td>a/**/z</td><td>能匹配 a/z,a/b/z,a/b/c/z,a/d/g/h/j/k/z</td></tr><br><tr><td>a/**b/z</td><td>能匹配 a/b/z,a/sb/z,但不能匹配a/x/sb/z,因为只有单**单独出现才能匹配多级目录</td></tr><br><tr><td>?.js</td><td>能匹配 a.js,b.js,c.js</td></tr><br><tr><td>a??</td><td>能匹配 a.b,abc,但不能匹配ab/,因为它不会匹配路径分隔符</td></tr><br><tr><td>[xyz].js</td><td>只能匹配 x.js,y.js,z.js,不会匹配xy.js,xyz.js等,整个中括号只代表一个字符</td></tr><br><tr><td>[^xyz].js</td><td>能匹配 a.js,b.js,c.js等,不能匹配x.js,y.js,z.js</td></tr><br></table>


<h3 id="8-3-gulp-dest"><a href="#8-3-gulp-dest" class="headerlink" title="8.3 gulp.dest()"></a>8.3 gulp.dest()</h3><p>是用来向硬盘写入文件的，其语法为：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp.dest(path[,options])</div></pre></td></tr></table></figure></p>
<ul>
<li><strong>path</strong> 为写入文件的路径</li>
<li><strong>options</strong> 为一个可选的参数对象，通常我们不需要用到</li>
</ul>
<p>要想使用好<code>gulp.dest()</code>这个方法，就要理解给它传入的路径参数与最终生成的文件的关系。</p>
<p><code>gulp.dest()</code>传入的路径参数只能用来指定要生成的文件的<strong>目录</strong>,而不能指定生成文件的文件名<br>它生成文件的文件名使用的是<strong>导入</strong>到它的文件流自身的文件名<br>所以生成的文件名是由导入到它的文件流决定的<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"> gulp.src(<span class="string">'script/jquery.js'</span>)</div><div class="line">.pipe(gulp.dest(<span class="string">'dist/jquery.js'</span>));</div><div class="line"><span class="comment">//最终生成的文件路径为 dist/jquery.js/jquery.js,而不是dist/jquery.js</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p><code>gulp.dest(path)</code>生成的文件路径是我们传入的path参数后面再加上<code>gulp.src()</code>中有通配符开始出现的那部分路径</p>
<p>通过指定<code>gulp.src()</code>方法配置参数中的<code>base</code>属性，我们可以更灵活的来改变<code>gulp.dest()</code>生成的文件路径<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//配置了base参数，此时base路径为script</span></div><div class="line">gulp.src(script/lib<span class="comment">/*.js, &#123;base:'script'&#125;)</span></div><div class="line">    //假设匹配到的文件为script/lib/jquery.js</div><div class="line">    //此时生成的文件路径为 build/lib/jquery.js</div><div class="line">    .pipe(gulp.dest('build'))</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="8-4-gulp-task"><a href="#8-4-gulp-task" class="headerlink" title="8.4 gulp.task()"></a>8.4 gulp.task()</h3><p><code>gulp.task</code>方法用来定义任务，其语法为：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp.task(name[, deps], fn)</div></pre></td></tr></table></figure></p>
<ul>
<li><strong>name</strong> 为任务<strong>名称</strong></li>
<li><strong>deps</strong> 是当前定义的任务需要<strong>依赖</strong>的其他任务，为一个数组。当前定义的任务会在所有依赖的任务执行完毕后才开始执行。如果没有依赖，则可省略这个参数</li>
<li><strong>fn</strong> 为<strong>任务定义函数</strong>，我们把任务要执行的代码都写在里面。该参数也是可选的。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'mytask'</span>, [<span class="string">'array'</span>, <span class="string">'of'</span>, <span class="string">'task'</span>, <span class="string">'names'</span>],</div><div class="line"> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//定义一个有依赖的任务</span></div><div class="line">    <span class="comment">// Do something</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>如果某个任务所依赖的任务是异步的，就要注意了，gulp并不会等待那个所依赖的异步任务完成，而是会接着执行后续的任务</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//two任务虽然依赖于one任务,但并不会等到one任务中的异步操作完成后再执行</span></div><div class="line">gulp.task(<span class="string">'one'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="comment">//one是一个异步执行的任务</span></div><div class="line">      setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'one is done'</span>)</div><div class="line">      &#125;,<span class="number">5000</span>);</div><div class="line">    &#125;);</div><div class="line"> gulp.task(<span class="string">'two'</span>,[<span class="string">'one'</span>],<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'two is done'</span>);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>在异步操作完成后执行一个<strong>回调函数</strong>来通知gulp这个异步任务已经完成,这个回调函数就是任务函数的第一个参数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'one'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">cb</span>)</span>&#123; <span class="comment">//cb为任务函数提供的回调，用来通知任务已经完成</span></div><div class="line">     <span class="comment">//one是一个异步执行的任务</span></div><div class="line">     setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="string">'one is done'</span>);</div><div class="line">       cb();  <span class="comment">//执行回调，表示这个异步任务已经完成</span></div><div class="line">     &#125;,<span class="number">5000</span>);</div><div class="line">   &#125;);</div></pre></td></tr></table></figure></p>
<h2 id="8-5-gulp-watch"><a href="#8-5-gulp-watch" class="headerlink" title="8.5 gulp.watch()"></a>8.5 gulp.watch()</h2><p>用来监视文件的变化，当文件发生变化后，我们可以利用它来执行相应的任务，例如文件拷贝等。其语法为<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp.watch(glob[, opts], tasks)</div></pre></td></tr></table></figure></p>
<ul>
<li><strong>glob</strong> 为要监视的文件匹配模式，规则和用法与<code>gulp.src()</code>方法中的 <strong>glob</strong> 相同。</li>
<li><strong>opts</strong> 为一个可选的配置对象，通常不需要用到</li>
<li><strong>tasks</strong> 为文件变化后要执行的任务，为一个数组<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'uglify'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="comment">//do something</span></div><div class="line">&#125;);</div><div class="line">gulp.task(<span class="string">'reload'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="comment">//do something</span></div><div class="line">&#125;);</div><div class="line">gulp.watch(<span class="string">'js/**/*.js'</span>, [<span class="string">'uglify'</span>,<span class="string">'reload'</span>]);</div></pre></td></tr></table></figure>
</li>
</ul>
<p>另外一种使用方式：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp.watch(glob[, opts, cb])</div></pre></td></tr></table></figure></p>
<ul>
<li><strong>glob</strong>和 <strong>opts</strong> 参数与第一种用法相同</li>
<li><code>cb</code>参数为一个函数。每当监视的文件发生变化时，就会调用这个函数,并且会给它传入一个对象，该对象包含了文件变化的一些信息  <code>type</code>属性为变化的类型，可以是 <strong>added</strong>、<strong>changed</strong>、<strong>deleted</strong>和<strong>path</strong>属性为发生变化的文件的路径<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> gulp.watch(<span class="string">'js/**/*.js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">  <span class="comment">//变化类型 added为新增,deleted为删除，changed为改变</span></div><div class="line">  <span class="built_in">console</span>.log(event.type);</div><div class="line">  <span class="comment">//变化的文件的路径</span></div><div class="line">  <span class="built_in">console</span>.log(event.path);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="9-基本任务"><a href="#9-基本任务" class="headerlink" title="9.基本任务"></a>9.基本任务</h2><h3 id="9-1-复制单个文件"><a href="#9-1-复制单个文件" class="headerlink" title="9.1 复制单个文件"></a>9.1 复制单个文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line">    gulp.task(<span class="string">'copy-html'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> gulp.src(<span class="string">'app/index.html'</span>).pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h3 id="9-2-复制多个文件"><a href="#9-2-复制多个文件" class="headerlink" title="9.2 复制多个文件"></a>9.2 复制多个文件</h3><p><img src="http://7xjf2l.com2.z0.glb.qiniucdn.com/copyallthings.jpg" class="img-responsive"><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="comment">//复制图片</span></div><div class="line">gulp.task(<span class="string">'copy-images'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'app/imgs/*.jpg'</span>)</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 1. &#123;&#125; 里可以指定多个扩展名</div><div class="line"> * 2. * 匹配所有的字符，除了路径分隔符 /</div><div class="line"> * 3. ** 匹配所有的字符，包括路径分隔符 /</div><div class="line"> */</div><div class="line">gulp.task(<span class="string">'copy-images'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'app/imgs/**/*.&#123;jpg,png&#125;'</span>)</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 1. 匹配多个目录 glob</div><div class="line"> * 2. 可以填写一个数组</div><div class="line"> */</div><div class="line">gulp.task(<span class="string">'copy-other'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src([<span class="string">'app/css/*.css'</span>,<span class="string">'app/js/*.js'</span>],&#123;<span class="attr">base</span>:<span class="string">'app'</span>&#125;)</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 1. 匹配多个目录 glob</div><div class="line"> * 2. !表示 排除一个文件</div><div class="line"> */</div><div class="line">gulp.task(<span class="string">'copy-other'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src([<span class="string">'app/css/*.css'</span>,<span class="string">'app/js/*.js'</span></div><div class="line">    ,<span class="string">'!app/js/*.tmp.js'</span>],&#123;<span class="attr">base</span>:<span class="string">'app'</span>&#125;)</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="9-3-组合任务"><a href="#9-3-组合任务" class="headerlink" title="9.3 组合任务"></a>9.3 组合任务</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"></div><div class="line">   gulp.task(<span class="string">'copy-html'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="keyword">return</span> gulp.src(<span class="string">'app/index.html'</span>).pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">   &#125;);</div><div class="line"></div><div class="line">   gulp.task(<span class="string">'copy-images'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="keyword">return</span> gulp.src(<span class="string">'app/imgs/**/*.&#123;jpg,png&#125;'</span>).pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">   &#125;);</div><div class="line"></div><div class="line">   gulp.task(<span class="string">'copy-other'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="keyword">return</span> gulp.src([<span class="string">'app/css/*.css'</span>,<span class="string">'app/js/*.js'</span>,<span class="string">'app/js/*.tmp.js'</span>],&#123;<span class="attr">base</span>:<span class="string">'app'</span>&#125;).pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">   &#125;);</div><div class="line"></div><div class="line"></div><div class="line">   gulp.task(<span class="string">'default'</span>,[<span class="string">'copy-html'</span>,<span class="string">'copy-images'</span>,<span class="string">'copy-other'</span>],<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="string">'全部拷贝任务执行完毕!'</span>);</div><div class="line">   &#125;);</div></pre></td></tr></table></figure>
<h3 id="9-4-监听任务"><a href="#9-4-监听任务" class="headerlink" title="9.4 监听任务"></a>9.4 监听任务</h3><p>使用 gulp 的 watch 这个方法，我们可以去监视一些文件，当这些文件发生变化的时候，立即去执行一些指定的任务<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"></div><div class="line">    gulp.task(<span class="string">'copy-html'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> gulp.src(<span class="string">'app/index.html'</span>)</div><div class="line">        .pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    gulp.task(<span class="string">'copy-images'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> gulp.src(<span class="string">'app/imgs/**/*.&#123;jpg,png&#125;'</span>,&#123;<span class="attr">base</span>:<span class="string">'app'</span>&#125;)</div><div class="line">        .pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    gulp.task(<span class="string">'copy-other'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> gulp.src([<span class="string">'app/css/*.css'</span>,<span class="string">'app/js/*.js'</span></div><div class="line">        ,<span class="string">'app/js/*.tmp.js'</span>],&#123;<span class="attr">base</span>:<span class="string">'app'</span>&#125;).pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">//在执行watch的时候会监控index.html文件的变化，发生变化后可以执行拷贝html的任务</span></div><div class="line">    gulp.task(<span class="string">'default'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        gulp.watch(<span class="string">'app/index.html'</span>,[<span class="string">'copy-html'</span>]);</div><div class="line">        gulp.watch(<span class="string">'app/imgs/**/*.&#123;jpg,png&#125;'</span>,[<span class="string">'copy-images'</span>]);</div><div class="line">        gulp.watch([<span class="string">'app/css/*.css'</span>,<span class="string">'app/js/*.js'</span></div><div class="line">        ,<span class="string">'app/js/*.tmp.js'</span>],[<span class="string">'copy-other'</span>]);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure></p>
<h2 id="10-gulp插件"><a href="#10-gulp插件" class="headerlink" title="10. gulp插件"></a>10. gulp插件</h2><p>gulp提供了一些很实用的接口，但本身并不能做太多的事情<br>可以读取文件、写入文件以及监控文件等一少部分功能<br>其它实用的功能都是依靠插件来进行扩展的<br>这些插件可以实现比如</p>
<ul>
<li>编译 Sass：gulp-sass</li>
<li>编译 Less：gulp-less</li>
<li>合并文件：gulp-concat</li>
<li>压缩js 文件：gulp-uglify</li>
<li>重命名js文件：gulp-rename</li>
<li>优化图像大小：gulp-imagemin</li>
<li>压缩css 文件：gulp-minify-css</li>
<li>创建本地服务器：gulp-connect</li>
<li>实时预览  gulp-connect</li>
</ul>
<h3 id="10-1-使用插件步骤"><a href="#10-1-使用插件步骤" class="headerlink" title="10.1 使用插件步骤"></a>10.1 使用插件步骤</h3><ol>
<li><code>npm install xxx --save-dev</code> 安装插件</li>
<li>在 <strong>gulpfile.js</strong> 顶部引入此插件</li>
<li>在创建任务的时候使用此插件</li>
</ol>
<h3 id="10-2-gulp-load-plugins"><a href="#10-2-gulp-load-plugins" class="headerlink" title="10.2  gulp-load-plugins"></a>10.2  gulp-load-plugins</h3><p>这个插件能自动帮你加载<code>package.json</code>文件里的gulp插件。<br>例如假设你的package.json文件里的依赖是这样的:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="string">"devDependencies"</span>: &#123;</div><div class="line">   <span class="string">"gulp"</span>: <span class="string">"^3.9.0"</span>,</div><div class="line">   <span class="string">"gulp-concat"</span>: <span class="string">"^2.6.0"</span>,</div><div class="line">   <span class="string">"gulp-connect"</span>: <span class="string">"^2.2.0"</span></div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>然后我们可以在<code>gulpfile.js</code>中使用<code>gulp-load-plugins</code>来帮我们加载插件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'gulp-load-plugins'</span>)();</div></pre></td></tr></table></figure></p>
<p>然后我们要使用<code>gulp-concat</code>和<code>gulp-connect</code>这两个插件的时候，<br>就可以使用<code>$.concat</code>和<code>$.connect</code>来代替了,也就是原始插件名去掉<code>gulp-</code>前缀，之后再转换为驼峰命名。</p>
<h3 id="10-3-less"><a href="#10-3-less" class="headerlink" title="10.3  less"></a>10.3  less</h3><p>less插件可以把less文件编译成css<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$    npm install gulp-less --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line">    <span class="keyword">var</span> less = <span class="built_in">require</span>(<span class="string">'gulp-less'</span>);</div><div class="line"></div><div class="line">    gulp.task(<span class="string">'less'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> gulp.src(<span class="string">'app/less/*.less'</span>)</div><div class="line">        .pipe(less())</div><div class="line">        .pipe(gulp.dest(<span class="string">'dist/css'</span>));</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    gulp.task(<span class="string">'default'</span>,[<span class="string">'less'</span>]);</div></pre></td></tr></table></figure>
<h3 id="10-4-gulp-concat"><a href="#10-4-gulp-concat" class="headerlink" title="10.4 gulp-concat"></a>10.4 gulp-concat</h3><p>这个插件可以把几个文件合并到一块<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$    npm install gulp-concat --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'concat'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src([<span class="string">'app/js/*.js'</span>,<span class="string">'!app/js/*.tmp.js'</span>])<span class="comment">//指定要合并的文件glob</span></div><div class="line">        .pipe(concat(<span class="string">'app.js'</span>))<span class="comment">//进行合并并指定合并后的文件名</span></div><div class="line">        .pipe(gulp.dest(<span class="string">'dist/js'</span>));<span class="comment">//输出到目标路径</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'default'</span>,[<span class="string">'concat'</span>]);</div></pre></td></tr></table></figure>
<h3 id="10-5-gulp-uglify"><a href="#10-5-gulp-uglify" class="headerlink" title="10.5  gulp-uglify"></a>10.5  gulp-uglify</h3><p>合并后我们可以对JS文件进行压缩,最小化处理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$  npm install gulp-uglify --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>);</div><div class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>)</div><div class="line"></div><div class="line">gulp.task(<span class="string">'uglify'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src([<span class="string">'app/js/*.js'</span>,<span class="string">'!app/js/*.tmp.js'</span>])</div><div class="line">        .pipe(concat(<span class="string">'app.js'</span>)) <span class="comment">//把多个JS文件合并成一个文件</span></div><div class="line">        .pipe(uglify()) <span class="comment">//对合并后的app.js文件进行压缩</span></div><div class="line">        .pipe(gulp.dest(<span class="string">'dist/js'</span>)); <span class="comment">//输出到目的地</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'default'</span>,[<span class="string">'uglify'</span>]);</div></pre></td></tr></table></figure>
<h3 id="10-6-gulp-rename"><a href="#10-6-gulp-rename" class="headerlink" title="10.6  gulp-rename"></a>10.6  gulp-rename</h3><p>在把处理好的文件存放到指定的位置之前，我们可以先去重新命名一下它<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install gulp-rename --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>);</div><div class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</div><div class="line"><span class="keyword">var</span> rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>);</div><div class="line">gulp.task(<span class="string">'uglify'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src([<span class="string">'app/js/*.js'</span>,<span class="string">'!app/js/*.tmp.js'</span>])<span class="comment">//指定要处理的文件</span></div><div class="line">        .pipe(concat(<span class="string">'app.js'</span>))<span class="comment">//合并成一个文件</span></div><div class="line">        .pipe(gulp.dest(<span class="string">'dist/js'</span>))<span class="comment">//保存此文件</span></div><div class="line">        .pipe(uglify())<span class="comment">//进行压缩</span></div><div class="line">        .pipe(rename(<span class="string">'app.min.js'</span>))<span class="comment">//对此文件进行重命名</span></div><div class="line">        .pipe(gulp.dest(<span class="string">'dist/js'</span>));<span class="comment">//再输出一次</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'default'</span>,[<span class="string">'uglify'</span>]);</div></pre></td></tr></table></figure>
<h3 id="10-7-gulp-minify-css"><a href="#10-7-gulp-minify-css" class="headerlink" title="10.7  gulp-minify-css"></a>10.7  gulp-minify-css</h3><p>压缩css<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$    npm install gulp-minify-css --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"> <span class="keyword">var</span> less = <span class="built_in">require</span>(<span class="string">'gulp-less'</span>);</div><div class="line"> <span class="keyword">var</span> minify = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>);<span class="comment">//在文件的顶部去包含这个插件，起个名字，叫做 minify</span></div><div class="line"> <span class="keyword">var</span> rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>);</div><div class="line"> gulp.task(<span class="string">'minify'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">     <span class="keyword">return</span> gulp.src(<span class="string">'app/less/page.less'</span>)<span class="comment">//指定 less文件</span></div><div class="line">         .pipe(less())<span class="comment">//把less编译成css</span></div><div class="line">         .pipe(gulp.dest(<span class="string">'dist/css'</span>))<span class="comment">//输出到目的地</span></div><div class="line">         .pipe(minify())<span class="comment">//对 css再进行压缩</span></div><div class="line">         .pipe(rename(<span class="string">'page.min.css'</span>))<span class="comment">//重命名</span></div><div class="line">         .pipe(gulp.dest(<span class="string">'dist/css'</span>));<span class="comment">//输出到目的地</span></div><div class="line"> &#125;);</div><div class="line"></div><div class="line"> gulp.task(<span class="string">'default'</span>,[<span class="string">'less'</span>]);</div></pre></td></tr></table></figure>
<h3 id="10-8-gulp-minify-html"><a href="#10-8-gulp-minify-html" class="headerlink" title="10.8  gulp-minify-html"></a>10.8  gulp-minify-html</h3><p>html文件压缩<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install gulp-minify-html --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    minifyHtml = <span class="built_in">require</span>(<span class="string">"gulp-minify-html"</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'minify-html'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    gulp.src(<span class="string">'src/*.html'</span>) <span class="comment">// 要压缩的html文件</span></div><div class="line">    .pipe(minifyHtml())    <span class="comment">//压缩</span></div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/html'</span>));<span class="comment">//输出到目的地</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="10-9-gulp-imagemin"><a href="#10-9-gulp-imagemin" class="headerlink" title="10.9  gulp-imagemin"></a>10.9  gulp-imagemin</h3><p>如果要想在保证不改变图像质量的情况下，让图像文件的体积变得更小一点,我们可以使用<code>gulp-imagemin</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install gulp-imagemin --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'copy-images'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'app/imgs/**/*.&#123;jpg,png&#125;'</span>)<span class="comment">//指定要压缩的图片</span></div><div class="line">        .pipe(imagemin()) <span class="comment">//进行图片压缩</span></div><div class="line">        .pipe(gulp.dest(<span class="string">'dist'</span>));<span class="comment">//输出目的地</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"> gulp.task(<span class="string">'default'</span>,[<span class="string">'copy-images'</span>]);</div></pre></td></tr></table></figure>
<h3 id="10-10-gulp-connect"><a href="#10-10-gulp-connect" class="headerlink" title="10.10 gulp-connect"></a>10.10 gulp-connect</h3><p>有些时候我们需要把文件放到本地服务器上去预览，gulp-connect可以帮我们创建一个本地服务器去运行我们的项目<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install gulp-connect --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> connect = <span class="built_in">require</span>(<span class="string">'gulp-connect'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'server'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">   connect.server(&#123;</div><div class="line">       <span class="attr">root</span>:<span class="string">'dist'</span>,<span class="comment">//服务器的根目录</span></div><div class="line">       port:<span class="number">8080</span> <span class="comment">//服务器的地址，没有此配置项默认也是 8080</span></div><div class="line">   &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'default'</span>,[<span class="string">'server'</span>]); <span class="comment">//运行此任务的时候会在8080上启动服务器，</span></div></pre></td></tr></table></figure>
<h3 id="10-11-自动刷新"><a href="#10-11-自动刷新" class="headerlink" title="10.11 自动刷新"></a>10.11 自动刷新</h3><p>我们希望当文件变化的时候浏览器可以自动刷新，这样我们就不需要文件修改后手动去刷新浏览器了<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> connect = <span class="built_in">require</span>(<span class="string">'gulp-connect'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'copy-html'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">     gulp.src(<span class="string">'app/index.html'</span>)<span class="comment">//指定源文件</span></div><div class="line">         .pipe(gulp.dest(<span class="string">'dist'</span>))<span class="comment">//拷贝到dist目录</span></div><div class="line">         .pipe(connect.reload());<span class="comment">//通知浏览器重启</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'watch'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    gulp.watch(<span class="string">'app/index.html'</span>,[<span class="string">'copy-html'</span>]);<span class="comment">//当index.html文件变化时执行copy-html任务</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'server'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    connect.server(&#123;</div><div class="line">        <span class="attr">root</span>:<span class="string">'dist'</span>,<span class="comment">//服务器的根目录</span></div><div class="line">        port:<span class="number">8080</span>, <span class="comment">//服务器的地址，没有此配置项默认也是 8080</span></div><div class="line">        livereload:<span class="literal">true</span><span class="comment">//启用实时刷新的功能</span></div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line">gulp.task(<span class="string">'default'</span>,[<span class="string">'server'</span>,<span class="string">'watch'</span>]);<span class="comment">//运行此任务的时候会在8080上启动服务器，</span></div></pre></td></tr></table></figure></p>
<h3 id="10-12-jshint"><a href="#10-12-jshint" class="headerlink" title="10.12 jshint"></a>10.12 jshint</h3><p>可以用此插件进行代码检查,注意必须同时安装jshint和gulp-jshint<br><a href="http://jshint.com/docs/options/" target="_blank" rel="external">全部选项</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install jshint gulp-jshint  --save-dev</div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    jshint = <span class="built_in">require</span>(<span class="string">"gulp-jshint"</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'jsLint'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    gulp.src(<span class="string">'src/*.js'</span>)</div><div class="line">    .pipe(jshint()) <span class="comment">//进行代码检查</span></div><div class="line">    .pipe(jshint.reporter()); <span class="comment">// 输出检查结果</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="11-gulp-js-特点"><a href="#11-gulp-js-特点" class="headerlink" title="11 gulp.js 特点"></a>11 gulp.js 特点</h2><ol>
<li>使用gulp.js构建的是代码不是配置文件</li>
<li>使用node标准库编写脚本</li>
<li>插件非常简单，职责单一</li>
<li>任务都是最大的并发数执行</li>
</ol>
<h2 id="12-学习建议"><a href="#12-学习建议" class="headerlink" title="12 学习建议"></a>12 学习建议</h2><ul>
<li>多了解插件库，利用最合适的插件。</li>
<li>常用的插件，仔细阅读 文档以便更好使用。</li>
<li>学习好自身的API</li>
<li>尝试编写适合自己工作流程中和习惯的<code>plugin</code></li>
</ul>
<h2 id="13-项目实战"><a href="#13-项目实战" class="headerlink" title="13 项目实战"></a>13 项目实战</h2><h3 id="13-1-安装生成器gulp-webapp"><a href="#13-1-安装生成器gulp-webapp" class="headerlink" title="13.1 安装生成器gulp-webapp"></a>13.1 安装生成器<code>gulp-webapp</code></h3><p><a href="http://yeoman.io" target="_blank" rel="external">yeoman</a></p>
<h3 id="13-2-生成项目"><a href="#13-2-生成项目" class="headerlink" title="13.2 生成项目"></a>13.2 生成项目</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$    mkdir gulpstart</div><div class="line">$    cd gulpstart</div><div class="line">$    npm install generator-gulp-webapp@0.2.0 -g</div><div class="line">$    yo gulp-webapp gulpstart</div></pre></td></tr></table></figure>
<p>会打开一个向导，在这里为了简化起见，我们不使用任何第三方库。<br><img src="http://7xjf2l.com2.z0.glb.qiniucdn.com/gulpdemo.jpg" class="img-responsive"></p>
<h3 id="13-3-阅读gulpfile-js文件"><a href="#13-3-阅读gulpfile-js文件" class="headerlink" title="13.3 阅读gulpfile.js文件"></a>13.3 阅读gulpfile.js文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* jshint node:true */</span></div><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"><span class="comment">// generated on 2015-10-15 using generator-gulp-webapp 0.2.0</span></div><div class="line"><span class="comment">//使用require把gulp引入进来</span></div><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="comment">/**</span></div><div class="line"> * 读取package.json中的devDependencies配置项，调用gulp api把相关的插件加载进来</div><div class="line"> * 返回一个object,每个key指向各自的插件，把对象赋值给 $,后面可以用$获取每个插件的引用</div><div class="line"> * 如果不使用gulp-load-plugins,就可以使用require引入插件 如</div><div class="line"> *  var sass = require('gulp-sass');</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'gulp-load-plugins'</span>)();</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 1.此插件是用来编译sass的</div><div class="line"> * 2.</div><div class="line"> */</div><div class="line">gulp.task(<span class="string">'styles'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">//把执行结果返回，以便此任务可以跟后续的任务配合依次执行。将多个小的操作进行组合，连接在一起就是流，数据依次从源头穿过一个个的管道，依次执行，最终在底部得到结果，可以很好的进行数据的转换</span></div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'app/styles/main.scss'</span>)<span class="comment">//读取此文件到数据流中</span></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 1.pipe是steam模块中负责传递流数据的方法，把前一个流里的数据以管道的方式传递给下一个管道。</div><div class="line">   * 2.标准的流当期中一个管道出错的时候会触发unpipe事件，会导致gulp报错并强制退出</div><div class="line">   * 我们现在监听main.scss文件的变化，一旦变化时会执行rubySass,但如果sass有语法错误，执行rubySass的时候会报错，会导致gulp报错并强制退出从而导致整个任务失败，watch就会失败，只能重启gulp服务。</div><div class="line">   * 然后不停的失败再重启，这样肯定是不可接受的。</div><div class="line">   * 3.plumber是水管工的意思，plumber通过替换pipe方法并移除onerror处理函数，这样即使有管道出问题了不会影响其它管道以及影响其它后续数据流的再处理。</div><div class="line">   * 当我们希望我们的管道能容忍容错的时候，就必须先通过plumber插件。</div><div class="line">   */</div><div class="line">      .pipe($.plumber())</div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 通过 npm install gulp-ruby-sass 安装</div><div class="line">   */</div><div class="line">      .pipe($.rubySass(&#123;</div><div class="line">        <span class="attr">style</span>: <span class="string">'expanded'</span>,<span class="comment">// 设置编译出来的模式为expanded模式，一共有四种 nested(层级选择器嵌套) expanded(不嵌套) compact(属性合合并在一行) compressed(全部合并到一行)，请参考 http://sass-lang.com/documentation/file.SASS_REFERENCE.html#_13</span></div><div class="line">        precision: <span class="number">10</span> <span class="comment">//属性保留几位小数点 因为sass支持表达式，比如10/3,那么除不尽会有小数，我们尽可能保留完整，如果不能保留10位</span></div><div class="line">      &#125;))</div><div class="line">    <span class="comment">//需要厂商前缀的属性自动添加厂商前缀，只适配每种浏览器最新的一个版本</span></div><div class="line">      .pipe($.autoprefixer(&#123;<span class="attr">browsers</span>: [<span class="string">'last 1 version'</span>]&#125;))</div><div class="line">    <span class="comment">//处理完成后把流数据写入.tmp/styles目录</span></div><div class="line">      .pipe(gulp.dest(<span class="string">'.tmp/styles'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'jshint'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">//对scripts目录下的JS进行校验，使用.jshintrc作为配置文件</span></div><div class="line">  <span class="comment">//配置文件说明 http://jinlong.github.io/2014/10/25/jshint-configuration/?utm_source=tuicool</span></div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'app/scripts/**/*.js'</span>)</div><div class="line">      .pipe($.jshint())</div><div class="line">    <span class="comment">//校验结果传递给jshint-stylish reporter</span></div><div class="line">      .pipe($.jshint.reporter(<span class="string">'jshint-stylish'</span>))<span class="comment">//传递的是report的名称</span></div><div class="line">    <span class="comment">//当校验没通过时会通过stylish记录下错误信息并传递给fail reporter,并使当前任务失败</span></div><div class="line">      .pipe($.jshint.reporter(<span class="string">'fail'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'html'</span>, [<span class="string">'styles'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">//lazypipe用来缓存一组管道配置，存起来稍后使用</span></div><div class="line">  <span class="keyword">var</span> lazypipe = <span class="built_in">require</span>(<span class="string">'lazypipe'</span>);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> cssChannel = lazypipe()</div><div class="line">    <span class="comment">//注意传递的是插件对象而不是插件方法调用</span></div><div class="line">    <span class="comment">//csso用来压缩css文件</span></div><div class="line">      .pipe($.csso)</div><div class="line">    <span class="comment">//替换内容</span></div><div class="line">      .pipe($.replace, <span class="string">'bower_components/bootstrap-sass-official/assets/fonts/bootstrap'</span>,<span class="string">'fonts'</span>);</div><div class="line">  <span class="comment">//通过解析html中的注释块来处理替换html中那些未经合并压缩的JS CSS等资源的引入</span></div><div class="line">  <span class="comment">//分成二步  assets 和 useref</span></div><div class="line">  <span class="comment">// assets方法用来生成检索资源文件的管道</span></div><div class="line">  <span class="keyword">var</span> assets = $.useref.assets(&#123;<span class="attr">searchPath</span>: <span class="string">'&#123;.tmp,app&#125;'</span>&#125;);<span class="comment">//指定在哪些目录中搜索 html文件，是相对于gulp</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'app/*.html'</span>)</div><div class="line">      .pipe(assets)<span class="comment">//检索传递进来的html文件，按注释指令对这些文件进行合并，然后生成一个新的流，将之前的HTML文件替换掉,新增加合并合的资源文件</span></div><div class="line">      .pipe($.<span class="keyword">if</span>(<span class="string">'*.js'</span>, $.uglify()))<span class="comment">//符合条件才能进入后面的流，如果是JS进行压缩再回归到主流</span></div><div class="line">      .pipe($.<span class="keyword">if</span>(<span class="string">'*.css'</span>, cssChannel()))<span class="comment">//如果是CSS文件，则先压缩CSS再替换fonts路径</span></div><div class="line">      .pipe(assets.restore())<span class="comment">//再回到主流，把删除的HTML文件添加回来</span></div><div class="line">      .pipe($.useref())<span class="comment">//修改原来注释块用修改后的引用地址替换掉原来的地址</span></div><div class="line">      .pipe($.<span class="keyword">if</span>(<span class="string">'*.html'</span>, $.minifyHtml(&#123;<span class="attr">conditionals</span>: <span class="literal">true</span><span class="comment">/*true不移除针对IE的注释*/</span>, <span class="attr">loose</span>: <span class="literal">true</span><span class="comment">/*压缩空格的时候至少保留一个空格*/</span>&#125;)))<span class="comment">//如果是html文件，则进行压缩</span></div><div class="line">      .pipe(gulp.dest(<span class="string">'dist'</span>));<span class="comment">//把处理后的文件输出到dist目录</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'images'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'app/images/**/*'</span>)<span class="comment">//把图片读取入流中</span></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 为了避免图片多次压缩失真</div><div class="line">   * imagemin只负责压缩图片，不负责检查图片是否被压缩过</div><div class="line">   * 为了避免二次压缩使用$.cache，维护一份临时文件记录哪些文件已经被处理过了，处理过了则不再传递给它包装的管道。</div><div class="line">   */</div><div class="line">      .pipe($.cache($.imagemin(&#123;</div><div class="line">        <span class="attr">progressive</span>: <span class="literal">true</span>,<span class="comment">//针对jpg 图像逐行扫描，先以比较模糊的方式出现，再清晰。</span></div><div class="line">        interlaced: <span class="literal">true</span> <span class="comment">//针夺gif,隔行扫描的方式。比如先出奇数行，再出偶数行，一半的时间就可以看到轮廓。</span></div><div class="line">      &#125;)))</div><div class="line">      .pipe(gulp.dest(<span class="string">'dist/images'</span>));<span class="comment">//输出到images目录</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'fonts'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">//main-bower-files 读取所有的bower的文件并合并上所有的字体文件读取入流</span></div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="built_in">require</span>(<span class="string">'main-bower-files'</span>)().concat(<span class="string">'app/fonts/**/*'</span>))</div><div class="line">      .pipe($.filter(<span class="string">'**/*.&#123;eot,svg,ttf,woff&#125;'</span>))<span class="comment">//类似于if,符合流转，不符合则被剔除</span></div><div class="line">      .pipe($.flatten())<span class="comment">//将相对路径移除</span></div><div class="line">      .pipe(gulp.dest(<span class="string">'dist/fonts'</span>));<span class="comment">//将字体文件写入fonts目录</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//将app下除了html以外的文件拷贝到dist目录 只拷贝一级</span></div><div class="line">gulp.task(<span class="string">'extras'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> gulp.src([</div><div class="line">    <span class="string">'app/*.*'</span>,</div><div class="line">    <span class="string">'!app/*.html'</span>,</div><div class="line">    <span class="string">'node_modules/apache-server-configs/dist/.htaccess'</span><span class="comment">//拷贝apache配置文件</span></div><div class="line">  ], &#123;</div><div class="line">    <span class="attr">dot</span>: <span class="literal">true</span><span class="comment">// node glob配置项，true时匹配以.开头的文件或文件夹</span></div><div class="line">  &#125;).pipe(gulp.dest(<span class="string">'dist'</span>));</div><div class="line">&#125;);</div><div class="line"><span class="comment">//删除.tmp和dist下的所有文件</span></div><div class="line">gulp.task(<span class="string">'clean'</span>, <span class="built_in">require</span>(<span class="string">'del'</span>).bind(<span class="literal">null</span>, [<span class="string">'.tmp'</span>, <span class="string">'dist'</span>]));</div><div class="line"><span class="comment">//等同于 gulp.task('clean',function()&#123;require('del')(['.tmp','dist'])&#125;);</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 1.connect会依赖styles</div><div class="line"> * 2.这是一个node扩展的http框架，可以使用中间件方便配置</div><div class="line"> */</div><div class="line">gulp.task(<span class="string">'connect'</span>, [<span class="string">'styles'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> serveStatic = <span class="built_in">require</span>(<span class="string">'serve-static'</span>);<span class="comment">//静态文件服务器中间件</span></div><div class="line">  <span class="keyword">var</span> serveIndex = <span class="built_in">require</span>(<span class="string">'serve-index'</span>);<span class="comment">//显示索引文件中间件</span></div><div class="line">  <span class="keyword">var</span> app = <span class="built_in">require</span>(<span class="string">'connect'</span>)()<span class="comment">//先创建connect对象叫app</span></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 此中间件就是自动为html插入livereload脚本，通过参数传递配置项参数</div><div class="line">   */</div><div class="line">      .use(<span class="built_in">require</span>(<span class="string">'connect-livereload'</span>)(&#123;<span class="attr">port</span>: <span class="number">35729</span>&#125;))<span class="comment">//实时重启服务器中间件</span></div><div class="line">      .use(serveStatic(<span class="string">'.tmp'</span>))<span class="comment">//对根目录的请求映射到.tmp目录</span></div><div class="line">      .use(serveStatic(<span class="string">'app'</span>))<span class="comment">//对根目录的请求映射到app目录</span></div><div class="line">    <span class="comment">//将对bower_components目录的访问定位到bower_components目录下</span></div><div class="line">      .use(<span class="string">'/bower_components'</span>, serveStatic(<span class="string">'bower_components'</span>))</div><div class="line">    <span class="comment">//参数为本地的一个文件目录，当路径命中这个目录的时候，而路径下没有index文件的时候会显示目录索引文件显示此目录下的所的文件</span></div><div class="line">      .use(serveIndex(<span class="string">'app'</span>));</div><div class="line">  <span class="comment">//加载http组件并创建http服务器，传入的参数app就是一个请求监听处理函数</span></div><div class="line">  <span class="comment">//当服务器接受请求的时候，会依次执行上面的一系列中间件，其实就是用请求路径在相应的文件夹里进行匹配，如果匹配上就返回</span></div><div class="line">  <span class="built_in">require</span>(<span class="string">'http'</span>).createServer(app)</div><div class="line">      .listen(<span class="number">9000</span>)</div><div class="line">    <span class="comment">//服务器监听成功后会输出此信息</span></div><div class="line">      .on(<span class="string">'listening'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Started connect web server on http://localhost:9000'</span>);</div><div class="line">      &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 1. 在命令行中执行 gulp serve 就可以自动打开浏览器，然后修改app/index.html就会实时刷新浏览器</div><div class="line"> * 2.因为watch依赖connect,所以这里connect可以省略</div><div class="line"> * 3.</div><div class="line"> *</div><div class="line"> */</div><div class="line">gulp.task(<span class="string">'serve'</span>, [<span class="string">'connect'</span>, <span class="string">'watch'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">//打开浏览器并打开指定的URL地址</span></div><div class="line">  <span class="built_in">require</span>(<span class="string">'opn'</span>)(<span class="string">'http://localhost:9000'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">//插入bower_component文件</span></div><div class="line">gulp.task(<span class="string">'wiredep'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> wiredep = <span class="built_in">require</span>(<span class="string">'wiredep'</span>).stream;</div><div class="line">  <span class="comment">//先处理sass文件对bower_component文件的依赖</span></div><div class="line">  gulp.src(<span class="string">'app/styles/*.scss'</span>)</div><div class="line">      .pipe(wiredep())</div><div class="line">      .pipe(gulp.dest(<span class="string">'app/styles'</span>));</div><div class="line"></div><div class="line">  <span class="comment">//处理app下的html文件对bower_component文件的依赖</span></div><div class="line">  gulp.src(<span class="string">'app/*.html'</span>)</div><div class="line">      .pipe(wiredep(&#123;<span class="attr">exclude</span>: [<span class="string">'bootstrap-sass-official'</span>]&#125;))<span class="comment">//排除bootstrap-sass-official</span></div><div class="line">      .pipe(gulp.dest(<span class="string">'app'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 1. watch依赖connect执行</div><div class="line"> * 2.</div><div class="line"> */</div><div class="line">gulp.task(<span class="string">'watch'</span>, [<span class="string">'connect'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">/**</span></div><div class="line">   * 1.先调用livereload的listen方法启动监听,这样文件发生改动时就可以接收到变化通知了</div><div class="line">   * 原理都是一样的，即通过在本地开启一个websocket服务，检测文件变化，当文件被修改后触发livereload任务，推送消息给浏览器刷新页面。详情参考</div><div class="line">   * http://blog.csdn.net/u010373419/article/details/38184333?utm_source=tuicool</div><div class="line">   */</div><div class="line">  $.livereload.listen();</div><div class="line"></div><div class="line">  <span class="comment">//监听文件的变化，当文件发生变化的时候重启服务器</span></div><div class="line">  <span class="comment">//gulp.watch返回的一个eventEmitter对象，通过on change可以添加事件监听 ，当watch监控这些文件发生变化的时候可以发射change事件，从而调用$.livereload.changed监听函数执行，这就是订阅者设计模式</span></div><div class="line">  <span class="comment">//监听函数可以获得哪些文件发生了改变，通过livereload服务器哪些文件变更了，</span></div><div class="line">  gulp.watch([</div><div class="line">    <span class="string">'app/*.html'</span>,</div><div class="line">    <span class="string">'.tmp/styles/**/*.css'</span>,</div><div class="line">    <span class="string">'app/scripts/**/*.js'</span>,</div><div class="line">    <span class="string">'app/images/**/*'</span></div><div class="line">  ]).on(<span class="string">'change'</span>, $.livereload.changed);</div><div class="line">  <span class="comment">//当scss文件变化的时候重新编译sass</span></div><div class="line">  gulp.watch(<span class="string">'app/styles/**/*.scss'</span>, [<span class="string">'styles'</span>]);</div><div class="line">  <span class="comment">//当bower.json文件发生变化的时候自动重启把依赖的组件引入html文件</span></div><div class="line">  gulp.watch(<span class="string">'bower.json'</span>, [<span class="string">'wiredep'</span>]);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *编译</div><div class="line"> *</div><div class="line"> */</div><div class="line">gulp.task(<span class="string">'build'</span>, [<span class="string">'jshint'</span>, <span class="string">'html'</span>, <span class="string">'images'</span>, <span class="string">'fonts'</span>, <span class="string">'extras'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">//size展示文件大小以及总的大小 gzip为true展示gzip压缩后的文件大小,展示的是项目的总大小</span></div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'dist/**/*'</span>).pipe($.size(&#123;<span class="attr">title</span>: <span class="string">'build'</span>, <span class="attr">gzip</span>: <span class="literal">true</span>&#125;));</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 组合任务</div><div class="line"> *</div><div class="line"> */</div><div class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'clean'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  gulp.start(<span class="string">'build'</span>);<span class="comment">//start 可以运行build任务</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="14-自定义插件"><a href="#14-自定义插件" class="headerlink" title="14 自定义插件"></a>14 自定义插件</h2><h3 id="14-1-vinyl"><a href="#14-1-vinyl" class="headerlink" title="14.1 vinyl"></a>14.1 vinyl</h3><p>gulp.src中这个流里的内容不是原始的文件流,而是一个<strong>虚拟文件对象流</strong>,这个虚拟文件对象中存储着原始文件的路径、文件名和内容等信息<br><a href="https://github.com/gulpjs/vinyl" target="_blank" rel="external">vinyl</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> File = <span class="built_in">require</span>(<span class="string">'vinyl'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> indexFile = <span class="keyword">new</span> File(&#123;</div><div class="line">    <span class="attr">cwd</span>: <span class="string">"/"</span>,<span class="comment">//当前路径</span></div><div class="line">    base: <span class="string">"/test/"</span>,<span class="comment">//文件名</span></div><div class="line">    path: <span class="string">"/test/index.js"</span>,<span class="comment">//路径</span></div><div class="line">    contents: <span class="keyword">new</span> Buffer(<span class="string">"name=zfpx"</span>)<span class="comment">//文件内容</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(File.isVinyl(indexFile));<span class="comment">//是否是vinyl</span></div><div class="line"><span class="built_in">console</span>.log(indexFile.isBuffer());<span class="comment">//内容是否是Buffer</span></div><div class="line"><span class="built_in">console</span>.log(indexFile.isStream());<span class="comment">//内容是否是Stream</span></div></pre></td></tr></table></figure>
<h3 id="14-2-through2"><a href="#14-2-through2" class="headerlink" title="14.2 through2"></a>14.2 through2</h3><p><a href="https://www.npmjs.com/package/through2" target="_blank" rel="external">https://www.npmjs.com/package/through2</a><br>二进制流的方式<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> through2 = <span class="built_in">require</span>(<span class="string">'through2'</span>);</div><div class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line"></div><div class="line">fs.createReadStream(<span class="string">'src.txt'</span>,&#123;<span class="attr">highWaterMark</span>:<span class="number">1</span>&#125;)</div><div class="line">    .pipe(through2(<span class="function"><span class="keyword">function</span> (<span class="params">chunk, encoding, callback</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; chunk.length; i++)</div><div class="line">            chunk[i] = chunk[i] + <span class="number">1</span>;</div><div class="line">        <span class="keyword">this</span>.push(chunk); <span class="comment">//向流中写数据,每push一次就发射一次data事件</span></div><div class="line">        callback();</div><div class="line">    &#125;)).on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(data.toString());</div><div class="line">    &#125;).on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="string">'end'</span>);</div><div class="line">&#125;)</div><div class="line"><span class="comment">//.pipe(fs.createWriteStream('dest.txt'))</span></div></pre></td></tr></table></figure></p>
<p>对象方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">var through2 = require(&apos;through2&apos;);</div><div class="line">var fs = require(&apos;fs&apos;);</div><div class="line">var all = [];</div><div class="line">fs.createReadStream(&apos;src.txt&apos;, &#123;highWaterMark: 1&#125;)</div><div class="line">    .pipe(through2.obj(function (chunk, enc, callback) &#123;</div><div class="line">        var data = &#123;</div><div class="line">            name: chunk.toString()</div><div class="line">        &#125;</div><div class="line">        this.push(data);</div><div class="line">        callback();</div><div class="line">    &#125;))</div><div class="line">    .on(&apos;data&apos;, function (data) &#123;</div><div class="line">        console.log(data)</div><div class="line">    &#125;)</div><div class="line">    .on(&apos;end&apos;, function () &#123;</div><div class="line">        console.log(&apos;end&apos;)</div><div class="line">    &#125;)</div></pre></td></tr></table></figure></p>
<h3 id="14-3-buffer往头部增加内容插件"><a href="#14-3-buffer往头部增加内容插件" class="headerlink" title="14.3 buffer往头部增加内容插件"></a>14.3 buffer往头部增加内容插件</h3><p>如果你的插件依赖着一个基于 buffer 处理的库，你可能会选择让你的插件以 buffer 的形式来处理 file.contents。让我们来实现一个在文件头部插入额外文本的插件：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> through = <span class="built_in">require</span>(<span class="string">'through2'</span>);</div><div class="line"><span class="keyword">var</span> PluginError = <span class="built_in">require</span>(<span class="string">'gulp-util'</span>).PluginError;</div><div class="line"><span class="keyword">const</span> PLUGIN_NAME = <span class="string">'gulp-prefixer'</span>;</div><div class="line"></div><div class="line"><span class="comment">// 插件级别的函数（处理文件）</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">gulpPrefixer</span>(<span class="params">prefixText</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!prefixText) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> PluginError(PLUGIN_NAME, <span class="string">'Missing prefix text!'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    prefixText = <span class="keyword">new</span> Buffer(prefixText); <span class="comment">// 提前分配</span></div><div class="line"></div><div class="line">    <span class="comment">// 创建一个 stream 通道，以让每个文件通过</span></div><div class="line">    <span class="keyword">var</span> stream = through.obj(<span class="function"><span class="keyword">function</span>(<span class="params">file, enc, cb</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (file.isStream()) &#123;</div><div class="line">            <span class="keyword">this</span>.emit(<span class="string">'error'</span>, <span class="keyword">new</span> PluginError(PLUGIN_NAME, <span class="string">'Streams are not supported!'</span>));</div><div class="line">            <span class="keyword">return</span> cb();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (file.isBuffer()) &#123;</div><div class="line">            file.contents = Buffer.concat([prefixText, file.contents]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// 确保文件进入下一个 gulp 插件</span></div><div class="line">        <span class="keyword">this</span>.push(file);</div><div class="line"></div><div class="line">        <span class="comment">// 告诉 stream 引擎，我们已经处理完了这个文件</span></div><div class="line">        cb();</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// 返回文件 stream</span></div><div class="line">    <span class="keyword">return</span> stream;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 导出插件主函数</span></div><div class="line"><span class="built_in">module</span>.exports = gulpPrefixer;</div></pre></td></tr></table></figure></p>
<p>上述的插件可以这样使用：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> gulpPrefixer = <span class="built_in">require</span>(<span class="string">'gulp-prefixer'</span>);</div><div class="line"></div><div class="line">gulp.src(<span class="string">'files/**/*.js'</span>)</div><div class="line">  .pipe(gulpPrefixer(<span class="string">'prepended string'</span>))</div><div class="line">  .pipe(gulp.dest(<span class="string">'modified-files'</span>));</div></pre></td></tr></table></figure></p>
<h3 id="14-4-stream往头部增加内容插件"><a href="#14-4-stream往头部增加内容插件" class="headerlink" title="14.4 stream往头部增加内容插件"></a>14.4 stream往头部增加内容插件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> through = <span class="built_in">require</span>(<span class="string">'through2'</span>);</div><div class="line"><span class="keyword">var</span> PluginError = <span class="built_in">require</span>(<span class="string">'gulp-util'</span>).PluginError;</div><div class="line"></div><div class="line"><span class="comment">//常量</span></div><div class="line"><span class="keyword">const</span> PLUGIN_NAME = <span class="string">'gulp-prefixer'</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">prefixStream</span>(<span class="params">prefixText</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> stream = through();</div><div class="line">    stream.write(prefixText);</div><div class="line">    <span class="keyword">return</span> stream;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 插件级别函数 (处理文件)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">gulpPrefixer</span>(<span class="params">prefixText</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!prefixText) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> PluginError(PLUGIN_NAME, <span class="string">'Missing prefix text!'</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    prefixText = <span class="keyword">new</span> Buffer(prefixText); <span class="comment">// 预先分配</span></div><div class="line"></div><div class="line">    <span class="comment">// 创建一个让每个文件通过的 stream 通道</span></div><div class="line">    <span class="keyword">var</span> stream = through.obj(<span class="function"><span class="keyword">function</span> (<span class="params">file, enc, cb</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (file.isBuffer()) &#123;</div><div class="line">            <span class="keyword">this</span>.emit(<span class="string">'error'</span>, <span class="keyword">new</span> PluginError(PLUGIN_NAME, <span class="string">'Buffers not supported!'</span>));</div><div class="line">            <span class="keyword">return</span> cb();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (file.isStream()) &#123;</div><div class="line">            <span class="comment">// 定义转换内容的 streamer</span></div><div class="line">            <span class="keyword">var</span> streamer = prefixStream(prefixText);</div><div class="line">            <span class="comment">// 从 streamer 中捕获错误，并发出一个 gulp的错误</span></div><div class="line">            streamer.on(<span class="string">'error'</span>, <span class="keyword">this</span>.emit.bind(<span class="keyword">this</span>, <span class="string">'error'</span>));</div><div class="line">            <span class="comment">// 开始转换</span></div><div class="line">            file.contents = file.contents.pipe(streamer);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// 确保文件进去下一个插件</span></div><div class="line">        <span class="keyword">this</span>.push(file);</div><div class="line">        <span class="comment">// 告诉 stream 转换工作完成</span></div><div class="line">        cb();</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">// 返回文件 stream</span></div><div class="line">    <span class="keyword">return</span> stream;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 暴露（export）插件的主函数</span></div><div class="line"><span class="built_in">module</span>.exports = gulpPrefixer;</div></pre></td></tr></table></figure>
<p>上述的插件可以这样使用：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</div><div class="line"><span class="keyword">var</span> gulpPrefixer = <span class="built_in">require</span>(<span class="string">'gulp-prefixer'</span>);</div><div class="line"></div><div class="line">gulp.src(<span class="string">'files/**/*.js'</span>, &#123; <span class="attr">buffer</span>: <span class="literal">false</span> &#125;)</div><div class="line">  .pipe(gulpPrefixer(<span class="string">'prepended string'</span>))</div><div class="line">  .pipe(gulp.dest(<span class="string">'modified-files'</span>));</div></pre></td></tr></table></figure></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2016/12/15/gulp/">
    <time datetime="2016-12-15T06:06:31.000Z" class="entry-date">
        2016-12-15
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/2016年12月/">2016年12月</a></li></ul>

    </footer>
</article>






  
    <article id="post-jQuery" class="post-jQuery post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2016/12/14/jQuery/">轻松掌握jQuery的使用</a>
    </h1>
  

        

      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="JQuery"><a href="#JQuery" class="headerlink" title="JQuery"></a>JQuery</h1><pre><code>$(this).hide() - 隐藏当前元素
$(&quot;p&quot;).hide() - 隐藏所有 &lt;p&gt; 元素
$(&quot;p.test&quot;).hide() - 隐藏所有 class=&quot;test&quot; 的 &lt;p&gt; 元素
$(&quot;#test&quot;).hide() - 隐藏所有 id=&quot;test&quot; 的元素
</code></pre><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><ul>
<li>在完全加载（就绪）之后运行 jQuery 代码。<br> $(document).ready(function(){<br> // 开始写 jQuery 代码…<br>});<h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><h5 id="元素选择器"><a href="#元素选择器" class="headerlink" title="元素选择器"></a>元素选择器</h5> $(“p”)    在页面中选取所有p元素<h5 id="id选择器"><a href="#id选择器" class="headerlink" title="#id选择器"></a>#id选择器</h5> $(“#test”)  通过 id 选取元素<h5 id="class选择器"><a href="#class选择器" class="headerlink" title=".class选择器"></a>.class选择器</h5> $(“.test”)  通过类查找元素</li>
</ul>
<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><pre><code>鼠标事件               键盘事件             表单事件              文档/窗口事件
click                 keypress            submit                    load
dblclick双击         keydown键按下          change                 resize
mouseenter          keyup键抬起             focus 获取焦点          scroll
mouseleave                                   blur 失去焦点           unload
mousedown鼠标按下
mouseup鼠标抬起
hover 光标悬停
</code></pre><ul>
<li><p>$(“p”).click(function(){<br>  鼠标点击p元素后执行的代码!!<br>});</p>
</li>
<li><p>$(“#p1”).mouseenter(function(){<br> alert(“p1”);  鼠标移入p1时，桌面弹出p1<br>});</p>
</li>
</ul>
<h1 id="jquery效果"><a href="#jquery效果" class="headerlink" title="jquery效果"></a>jquery效果</h1><blockquote>
<p>$(selector).show(speed,callback);<br>  可选的 speed 参数规定隐藏/显示的速度，可以取以下值：”slow”、”fast” 或毫秒。<br>  可选的 callback 参数是隐藏或显示完成后所执行的函数名称。</p>
</blockquote>
<h2 id="显示和隐藏-可以指定时间"><a href="#显示和隐藏-可以指定时间" class="headerlink" title="显示和隐藏       (可以指定时间)"></a>显示和隐藏       (可以指定时间)</h2><p>  $(“#hide”).click(function(){<br>        $(“p”).hide(); 隐藏<br>  });</p>
<p>  $(“#show”).click(function(){<br>          $(“p”).show();  显示<br>  });<br>  $(“button”).click(function(){<br>    $(“p”).toggle();  切换<br>  });</p>
<blockquote>
<p>toggle() 方法来切换 hide() 和 show() 方法。</p>
</blockquote>
<h2 id="淡入淡出-可以指定时间"><a href="#淡入淡出-可以指定时间" class="headerlink" title="淡入淡出        (可以指定时间)"></a>淡入淡出        (可以指定时间)</h2><p>  jQuery fadeIn(speed,callback)淡入<br>  jQuery fadeOut(speed,callback)淡出<br>  jQuery fadeToggle(speed,callback)切换淡入和淡出<br>  jQuery fadeTo(speed,opacity,callback)渐变为给定的不透明度（值介于 0 与 1 之间）。</p>
<ul>
<li><p>实例 </p>
<pre><code> $(&quot;button&quot;).click(function(){
   $(&quot;#div1&quot;).fadeIn();
   $(&quot;#div2&quot;).fadeIn(&quot;slow&quot;);
   $(&quot;#div3&quot;).fadeIn(3000);
});
</code></pre></li>
</ul>
<h2 id="滑动-可以指定时间"><a href="#滑动-可以指定时间" class="headerlink" title="滑动       (可以指定时间)"></a>滑动       (可以指定时间)</h2><pre><code>slideDown(speed,callback)向下滑
slideUp(speed,callback)向上
slideToggle(speed,callback)切换上下
</code></pre><h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><p>$(selector).animate({params},speed,callback);<br>必需的 params 参数定义形成动画的 CSS 属性。<br>可选的 speed 参数规定效果的时长。它可以取以下值：”slow”、”fast” 或毫秒。<br>可选的 callback 参数是动画完成后所执行的函数名称。</p>
<h5 id="jQuery-animate-操作多个属性"><a href="#jQuery-animate-操作多个属性" class="headerlink" title="jQuery animate() - 操作多个属性"></a>jQuery animate() - 操作多个属性</h5><p>实例</p>
<pre><code>$(&quot;button&quot;).click(function(){
    $(&quot;div&quot;).animate({
     left:&apos;250px&apos;,
     opacity:&apos;0.5&apos;,
     height:&apos;150px&apos;,
     width:&apos;150px&apos;
     });
 });
</code></pre><h2 id="停止动画"><a href="#停止动画" class="headerlink" title="停止动画"></a>停止动画</h2><p> $(selector).stop(stopAll,goToEnd);<br>可选的 stopAll 参数规定是否应该清除动画队列。默认是 false，即仅停止活动的动画，允许任何排入队列的动画向后执行。<br>可选的 goToEnd 参数规定是否立即完成当前动画。默认是 false。</p>
<h2 id="callback"><a href="#callback" class="headerlink" title="callback"></a>callback</h2><ul>
<li><p>Callback 函数在当前动画 100% 完成之后执行。</p>
<pre><code> $(&quot;button&quot;).click(function(){
    $(&quot;p&quot;).hide(&quot;slow&quot;,function(){
      alert(&quot;The paragraph is now hidden&quot;);
   });
});
</code></pre><h2 id="Chaining-链式写法"><a href="#Chaining-链式写法" class="headerlink" title="Chaining 链式写法"></a>Chaining 链式写法</h2><p>  $(“#p1”).css(“color”,”red”).slideUp(2000).slideDown(2000);</p>
</li>
</ul>
<h2 id="jq的捕获"><a href="#jq的捕获" class="headerlink" title="jq的捕获"></a>jq的捕获</h2><h3 id="获得内容-text-、html-以及-val"><a href="#获得内容-text-、html-以及-val" class="headerlink" title="获得内容 - text()、html() 以及 val()"></a>获得内容 - text()、html() 以及 val()</h3><pre><code>text() - 设置或返回所选元素的文本内容
html() - 设置或返回所选元素的内容（包括 HTML 标记）
val() - 设置或返回表单字段的值
</code></pre><h3 id="获取属性-attr"><a href="#获取属性-attr" class="headerlink" title="获取属性 - attr()"></a>获取属性 - attr()</h3><h2 id="设置内容和属性"><a href="#设置内容和属性" class="headerlink" title="设置内容和属性"></a>设置内容和属性</h2><p>$(“#btn1”).click(function(){</p>
<pre><code>$(&quot;#test1&quot;).text(&quot;Hello world!&quot;);
</code></pre><p>});</p>
<p>$(“#btn2”).click(function(){</p>
<pre><code>$(&quot;#test2&quot;).html(&quot;\&lt;b\&gt;Hello world!\&lt;/b\&gt;&quot;);
</code></pre><p>});</p>
<p>$(“#btn3”).click(function(){</p>
<pre><code>$(&quot;#test3&quot;).val(&quot;RUNOOB&quot;);    
</code></pre><p>});</p>
<h2 id="jQuery-attr-方法也用于设置-改变属性值。"><a href="#jQuery-attr-方法也用于设置-改变属性值。" class="headerlink" title="jQuery attr() 方法也用于设置/改变属性值。"></a>jQuery attr() 方法也用于设置/改变属性值。</h2><p>$(“button”).click(function(){</p>
<pre><code>$(&quot;#runoob&quot;).attr({
    &quot;href&quot; : &quot;http://www.runoob.com/jquery&quot;,
    &quot;title&quot; : &quot;jQuery 教程&quot;
});
</code></pre><p>})</p>
<h2 id="添加新的-HTML-内容"><a href="#添加新的-HTML-内容" class="headerlink" title="添加新的 HTML 内容"></a>添加新的 HTML 内容</h2><pre><code>append() - 在被选元素的结尾插入内容
prepend() - 在被选元素的开头插入内容
after() - 在被选元素之后插入内容
before() - 在被选元素之前插入内容
</code></pre><ul>
<li><p>在下面的例子中，我们创建若干个新元素。这些元素可以通过 text/HTML、jQuery 或者 JavaScript/DOM 来创建。然后我们通过 append() 方法把这些新元素追加到文本中（对 prepend() 同样有效）：<br>实例</p>
<p>  function appendText()</p>
<pre><code> {
      var txt1=&quot;\&lt;p\&gt;文本。\&lt;/p\&gt;&quot;;              // 使用 HTML 标签创建文本   
      var txt2=$(&quot;\&lt;p\&gt;\&lt;/p\&gt;&quot;).text(&quot;文本。&quot;);  // 使用 jQuery 创建文本
     var txt3=document.createElement(&quot;p&quot;);
     txt3.innerHTML=&quot;文本。&quot;;               // 使用 DOM 创建文本 text with DOM
     $(&quot;body&quot;).append(txt1,txt2,txt3);        // 追加新元素
}
</code></pre></li>
</ul>
<h2 id="删除元素-内容"><a href="#删除元素-内容" class="headerlink" title="删除元素/内容"></a>删除元素/内容</h2><p>  如需删除元素和内容，一般可使用以下两个 jQuery 方法：</p>
<pre><code>remove() - 删除被选元素（及其子元素） 自己也被移除
empty() - 从被选元素中删除子元素  不删除自己
$(&quot;p&quot;).remove(&quot;.abc&quot;);    过滤删除  只删除类名为abc的p元素
</code></pre><p>##jQuery 操作 CSS</p>
<p>  jQuery 拥有若干进行 CSS 操作的方法。我们将学习下面这些：</p>
<pre><code>addClass() - 向被选元素添加一个或多个类
removeClass() - 从被选元素删除一个或多个类
toggleClass() - 对被选元素进行添加/删除类的切换操作
css() - 设置或返回样式属性
</code></pre><h2 id="jQuery-css-方法"><a href="#jQuery-css-方法" class="headerlink" title="jQuery css() 方法"></a>jQuery css() 方法</h2><p>  css() 方法设置或返回被选元素的一个或多个样式属性。</p>
<p>  $(“p”).css({“background-color”:”yellow”,”font-size”:”200%”}); </p>
<h2 id="尺寸"><a href="#尺寸" class="headerlink" title="尺寸"></a>尺寸</h2><h2 id="http-www-runoob-com-jquery-jquery-dimensions-html"><a href="#http-www-runoob-com-jquery-jquery-dimensions-html" class="headerlink" title="   http://www.runoob.com/jquery/jquery-dimensions.html"></a>   <a href="http://www.runoob.com/jquery/jquery-dimensions.html" target="_blank" rel="external">http://www.runoob.com/jquery/jquery-dimensions.html</a></h2><h2 id="遍历祖先"><a href="#遍历祖先" class="headerlink" title="遍历祖先"></a>遍历祖先</h2><p>向上遍历 DOM 树</p>
<p>这些 jQuery 方法很有用，它们用于向上遍历 DOM 树：</p>
<pre><code>parent() 方法返回被选元素的直接父元素。
parents()方法返回被选元素的所有祖先元素,直到文档的根元素 (&lt;html&gt;)。
parentsUntil()方法返回介于两个给定元素之间的所有祖先元素
</code></pre><p>实例</p>
<pre><code>$(document).ready(function(){
</code></pre><p>返回介于 <span\> 与 <div\> 元素之间的所有祖先元素：</div\></span\></p>
<pre><code>$(&quot;span&quot;).parentsUntil(&quot;div&quot;);

}); 
</code></pre><h2 id="向下遍历-DOM-树"><a href="#向下遍历-DOM-树" class="headerlink" title="向下遍历 DOM 树"></a>向下遍历 DOM 树</h2><p>  下面是两个用于向下遍历 DOM 树的 jQuery 方法：</p>
<pre><code>children()方法返回被选元素的所有直接子元素。也可以使用可选参数来过滤对子元素的搜索
find()方法返回被选元素的后代元素，一路向下直到最后一个后代。
</code></pre><h2 id="有许多有用的方法让我们在-DOM-树进行水平遍历："><a href="#有许多有用的方法让我们在-DOM-树进行水平遍历：" class="headerlink" title="有许多有用的方法让我们在 DOM 树进行水平遍历："></a>有许多有用的方法让我们在 DOM 树进行水平遍历：</h2><pre><code>siblings()方法返回被选元素的所有兄弟元素。可选参数过滤
next()返回被选元素的下一个弟弟元素。
nextAll()返回被选元素的下面所有的弟弟元素。
nextUntil()返回介于两个给定参数之间的所有弟弟元素。
prev()
prevAll()
prevUntil()
</code></pre><h2 id="过滤"><a href="#过滤" class="headerlink" title="过滤"></a>过滤</h2><pre><code>first()方法返回被选元素的首个元素。
last() 方法返回被选元素的最后一个元素。
eq() 方法返回被选元素中带有指定索引号的元素。
filter() 方法允许您规定一个标准。不匹配这个标准的元素会被从集合中删除，匹配的元素会被返回。
not() 方法返回不匹配标准的所有元素。  not方法与 filter() 相反。
</code></pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2016/12/14/jQuery/">
    <time datetime="2016-12-14T03:06:31.000Z" class="entry-date">
        2016-12-14
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/2016年12月/">2016年12月</a></li></ul>

    </footer>
</article>






  
    <article id="post-Git" class="post-Git post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2016/12/02/Git/">Git入门知识详解</a>
    </h1>
  

        

      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Git的使用"><a href="#Git的使用" class="headerlink" title="Git的使用"></a>Git的使用</h1><h2 id="配置使用人的账号和邮箱"><a href="#配置使用人的账号和邮箱" class="headerlink" title="配置使用人的账号和邮箱"></a>配置使用人的账号和邮箱</h2><pre><code>git config --global user.name zhufengzhufeng
git config --global user.email xxxxx
git config --list 查看所有配置
</code></pre><p>mkdir 创建目录</p>
<h2 id="初始化git"><a href="#初始化git" class="headerlink" title="初始化git"></a>初始化git</h2><pre><code>git init
</code></pre><h2 id="初始化文件"><a href="#初始化文件" class="headerlink" title="初始化文件"></a>初始化文件</h2><pre><code>echo hello &gt; index.txt       覆盖写入
echo hello word &gt;&gt; index.txt 写入
cat index.txt  查看文本里的内容
</code></pre><blockquote>
<p>一个大于号表示清空并写入 &gt;&gt; 表示 追加</p>
</blockquote>
<h2 id="删除文件rm"><a href="#删除文件rm" class="headerlink" title="删除文件rm"></a>删除文件rm</h2><h2 id="查看状态-git-status"><a href="#查看状态-git-status" class="headerlink" title="查看状态  git status"></a>查看状态  git status</h2><h2 id="将文件加入到暂存区中"><a href="#将文件加入到暂存区中" class="headerlink" title="将文件加入到暂存区中"></a>将文件加入到暂存区中</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git add file</div><div class="line">git add ./git add -A</div></pre></td></tr></table></figure>
<h2 id="提交commit"><a href="#提交commit" class="headerlink" title="提交commit"></a>提交commit</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit -m&quot;first&quot;</div></pre></td></tr></table></figure>
<h2 id="vi控制台"><a href="#vi控制台" class="headerlink" title="vi控制台"></a>vi控制台</h2><p>如果进入编辑模式可以i键进入插入模式</p>
<ul>
<li>i表示编辑</li>
<li>退出esc + :wq</li>
</ul>
<h2 id="查看版本库信息"><a href="#查看版本库信息" class="headerlink" title="查看版本库信息"></a>查看版本库信息</h2><pre><code>git log --oneline 查看版本库信息
git reflog   查看未来的版本
</code></pre><h2 id="比较代码差异"><a href="#比较代码差异" class="headerlink" title="比较代码差异"></a>比较代码差异</h2><pre><code>git diff            比较工作区和暂存区的区别
git diff master     比较工作区和版本库的区别
git diff --cached   比较暂存区和版本库的区别
</code></pre><h2 id="从暂存区删除本次的add"><a href="#从暂存区删除本次的add" class="headerlink" title="从暂存区删除本次的add"></a>从暂存区删除本次的add</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git reset HEAD &lt;file&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>取消本次的add</p>
</blockquote>
<h2 id="从缓存区-从历史区将代码覆盖掉工作区"><a href="#从缓存区-从历史区将代码覆盖掉工作区" class="headerlink" title="从缓存区 从历史区将代码覆盖掉工作区"></a>从缓存区 从历史区将代码覆盖掉工作区</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">		git checkout &lt;file&gt;</div><div class="line">``` </div><div class="line"></div><div class="line">## 回到过去</div></pre></td></tr></table></figure>
<p>git reset –hard commit_id/HEAD^^^^^^^/HEAD~6<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">## 分支</div><div class="line"></div><div class="line">	查看所有分支git branch </div><div class="line">	创建分支git branch dev</div><div class="line">	切换分支git checkout dev </div><div class="line">	创建并切换git checkout -b fixbug</div><div class="line">	删除分支git branch -d dev</div><div class="line">	合并分支git merge 分支名</div><div class="line"></div><div class="line">&gt; 在主干上拉取一条分支，在分支上进行开发，开发后，在主干上将代码进行合并，主干上目前没有人开发，</div><div class="line">可以使用快转的方式，将我们的指针直接指向到分支的最新装态 fast-forward</div><div class="line"></div><div class="line">## 在github上部署静态页</div><div class="line"></div><div class="line">需要将特定的内容推送到github上的gh-pages分支上</div><div class="line"></div><div class="line">- 创建一个gh-pages的分支</div></pre></td></tr></table></figure></p>
<p>git checkout -b gh-pages<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- 将代码commit 到这个分支上</div></pre></td></tr></table></figure></p>
<p>git add .<br>git commit -m ‘ok’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- 连接远程仓库和本地仓库</div></pre></td></tr></table></figure></p>
<p>git remote add aaa 地址<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- 将代码推送到远程仓库上</div></pre></td></tr></table></figure></p>
<p>git push aaa gh-pages<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">##合并分支产生冲突</div><div class="line"></div><div class="line">	git log --graph --oneline --decorate 查看</div><div class="line"></div><div class="line">## 合并分支产生冲突</div><div class="line"></div><div class="line">- 在主干的某个版本上进行分支开发，在分支上开发1.txt这个文件(drag)，在主干上也开发1.txt(limit),此时回到主干上合并时，会产生冲突，需要我们手动解决</div><div class="line"></div><div class="line">## 从工作区中提交到历史区</div></pre></td></tr></table></figure></p>
<p>git commit -a -m’drag’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">## 解决冲突</div><div class="line">去掉&gt;&gt;&gt;&gt;&gt;&gt; ========  &lt;&lt;&lt;&lt;&lt;&lt;&lt; 保留需要的内容再次提交</div><div class="line"></div><div class="line">## 合并</div><div class="line">git rebase 变基</div><div class="line">git cherry-pick 精选</div><div class="line"></div><div class="line">## 显示结构</div></pre></td></tr></table></figure></p>
<p>git log –graph –oneline –decorate<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">## 创建忽略文件</div><div class="line"></div><div class="line">将项目提交到github上，需要在github上创建一个空的仓库</div><div class="line"></div><div class="line">## 添加远程仓库的连接</div></pre></td></tr></table></figure></p>
<p>git remote add 名字  地址<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">## 查看配置的所有配置的地址</div></pre></td></tr></table></figure></p>
<p>git remote -v<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">## 删除地址</div></pre></td></tr></table></figure></p>
<p>git remote rm 名字<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">## upstream</div></pre></td></tr></table></figure></p>
<p>-u 下次提交或者拉取代码可以直接git push 或者git pull<br>```</p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2016/12/02/Git/">
    <time datetime="2016-12-02T06:36:31.000Z" class="entry-date">
        2016-12-02
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/2016年12月/">2016年12月</a></li></ul>

    </footer>
</article>






  
    <article id="post-hello-world" class="post-hello-world post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title">
      <a class="article-title" href="/2016/12/01/hello-world/">hexo 使用</a>
    </h1>
  

        

      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2016/12/01/hello-world/">
    <time datetime="2016-12-01T06:36:00.000Z" class="entry-date">
        2016-12-01
    </time>
</a>
    
    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/2016年12月/">2016年12月</a></li></ul>

    </footer>
</article>






  
  

</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    <!--
<aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="搜索" />
    </div>
</form></aside>-->

  
    
  
    
  
    
  <aside class="widget">
    <h3 class="widget-title">最近的文章</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2017/04/06/es6/">ES6的使用</a>
          </li>
        
          <li>
            <a href="/2017/04/06/babel/">Babel的操作指南</a>
          </li>
        
          <li>
            <a href="/2017/04/05/vue/">vue概述</a>
          </li>
        
          <li>
            <a href="/2016/12/16/Flex/">Flex弹性盒子布局</a>
          </li>
        
          <li>
            <a href="/2016/12/15/webpack/">由浅入深了解webpack的使用</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-content">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2016年12月/">2016年12月</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2017年04月/">2017年04月</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </aside>

  
    
  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2017 顾佳伟
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</footer>
    
<div id="bg"></div>

  </div>
</body>
</html>